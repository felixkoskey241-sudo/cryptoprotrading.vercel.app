<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CryptoPro - Professional Crypto Trading Platform</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-primary: #0B0E11;
            --bg-secondary: #161A1E;
            --bg-tertiary: #1E2329;
            --border-color: #2B3139;
            --text-primary: #EAECEF;
            --text-secondary: #848E9C;
            --accent-green: #0ECB81;
            --accent-red: #F6465D;
            --accent-yellow: #FCD535;
            --accent-blue: #00d9ff;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .layer {
            display: none;
            min-height: 100vh;
            animation: fadeIn 0.5s ease-out;
        }
        .layer.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        @keyframes slideIn {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideLeft {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .referral-success-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #0ECB81, #0B8F5F);
            padding: 20px;
            text-align: center;
            z-index: 9999;
            box-shadow: 0 4px 20px rgba(14, 203, 129, 0.4);
            animation: slideIn 0.5s ease-out;
            display: none;
        }

        .referral-success-banner.show { display: block; }

        .referral-success-content h2 {
            font-size: 28px;
            margin-bottom: 8px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .referral-success-content p {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .bonus-highlight {
            display: inline-block;
            font-size: 42px;
            font-weight: 900;
            color: #FCD535;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
            margin: 12px 0;
            animation: pulse 2s infinite;
        }

        .close-banner {
            position: absolute;
            top: 10px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 24px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .close-banner:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .navbar {
            background: var(--bg-secondary);
            backdrop-filter: blur(10px);
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-green);
            cursor: pointer;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .btn-login {
            background: transparent;
            color: var(--accent-blue);
            border: 2px solid var(--accent-blue);
        }

        .btn-signup {
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: #fff;
            border: none;
        }

        .btn-signup:hover, .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(14, 203, 129, 0.4);
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: rgba(14, 203, 129, 0.1);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            color: var(--accent-green);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: var(--accent-green);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        .container {
            max-width: 1920px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero-section {
            background: linear-gradient(135deg, rgba(14, 203, 129, 0.1), rgba(0, 217, 255, 0.1));
            border: 2px solid var(--accent-green);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 20px;
            text-align: center;
        }

        .hero-section h1 {
            font-size: 48px;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 16px;
        }

        .hero-section p {
            font-size: 18px;
            color: var(--text-primary);
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .hero-cta {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .hero-btn {
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .hero-btn-primary {
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: #fff;
        }

        .hero-btn-secondary {
            background: transparent;
            color: var(--accent-blue);
            border: 2px solid var(--accent-blue);
        }

        .hero-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(14, 203, 129, 0.4);
        }

        .live-traders-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .live-traders-title {
            text-align: center;
            color: var(--accent-green);
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .ticker-wrapper {
            overflow: hidden;
            position: relative;
        }

        .ticker-content {
            display: flex;
            animation: slideLeft 90s linear infinite;
            white-space: nowrap;
        }

        .trader-card {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: var(--bg-tertiary);
            border-radius: 12px;
            margin-right: 16px;
            border: 1px solid var(--border-color);
            min-width: 250px;
        }

        .trader-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .trader-info {
            flex: 1;
        }

        .trader-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }

        .trader-profit {
            font-weight: 700;
            color: var(--accent-green);
            font-size: 16px;
        }

        .top-winners-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .top-winners-title {
            color: var(--accent-green);
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .winners-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }

        .winner-card {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid var(--border-color);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .winner-card:hover {
            border-color: var(--accent-green);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(14, 203, 129, 0.3);
        }

        .winner-rank {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            color: #000;
            font-size: 16px;
        }

        .winner-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .winner-avatar-large {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .winner-details h4 {
            font-size: 18px;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .winner-location {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .winner-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .winner-stat {
            background: rgba(14, 203, 129, 0.1);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .winner-stat-label {
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .winner-stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent-green);
        }

        .stats-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .stat-card {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .stat-card:hover {
            border-color: var(--accent-green);
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(14, 203, 129, 0.2);
        }

        .stat-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--accent-green);
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .chart-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--accent-green);
        }

        .chart-labels {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            margin-bottom: 8px;
            padding: 0 20px;
        }

        .chart-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-align: center;
        }

        .chart-wrapper {
            position: relative;
            width: 100%;
            height: 400px;
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .chart-wrapper.small {
            height: 200px;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .price-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .current-price {
            font-size: 32px;
            font-weight: 900;
            color: var(--accent-green);
        }

        .price-change {
            font-size: 18px;
            font-weight: 700;
            padding: 8px 16px;
            border-radius: 8px;
        }

        .price-change.positive {
            background: rgba(14, 203, 129, 0.2);
            color: var(--accent-green);
        }

        .price-change.negative {
            background: rgba(246, 70, 93, 0.2);
            color: var(--accent-red);
        }

        .auth-container {
            max-width: 480px;
            margin: 80px auto;
            padding: 40px;
            background: var(--bg-secondary);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            border: 1px solid var(--border-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 16px;
            transition: all 0.3s;
            font-family: inherit;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: var(--accent-green);
            box-shadow: 0 0 0 3px rgba(14, 203, 129, 0.1);
        }

        .btn-submit {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: #fff;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(14, 203, 129, 0.4);
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .action-btn {
            padding: 20px;
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .btn-trade {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #000;
        }

        .btn-deposit {
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: #fff;
        }

        .btn-reviews {
            background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
            color: #000;
        }

        .payment-method-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .payment-method-btn {
            padding: 20px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-weight: 600;
            font-size: 15px;
        }

        .payment-method-btn.active {
            border-color: var(--accent-green);
            background: rgba(14, 203, 129, 0.2);
            font-weight: 700;
        }

        .payment-method-btn:hover {
            border-color: var(--accent-green);
        }

        .payment-details {
            background: rgba(14, 203, 129, 0.1);
            border: 2px solid rgba(14, 203, 129, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            display: none;
        }

        .payment-details.active {
            display: block;
        }

        .payment-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 16px;
            border-radius: 8px;
            margin: 12px 0;
        }

        .payment-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent-green);
            font-family: 'Monaco', 'Courier New', monospace;
            word-break: break-all;
        }

        .copy-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--accent-blue), #0099cc);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 8px;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 217, 255, 0.4);
        }

        .whatsapp-support {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
        }

        .whatsapp-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #25D366, #128C7E);
            color: white;
            padding: 16px 24px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 20px rgba(37, 211, 102, 0.4);
            transition: all 0.3s;
        }

        .whatsapp-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(37, 211, 102, 0.6);
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }

        .alert.show { display: block; }

        .alert-success {
            background: rgba(14, 203, 129, 0.1);
            border: 1px solid rgba(14, 203, 129, 0.3);
            color: var(--accent-green);
        }

        .alert-error {
            background: rgba(246, 70, 93, 0.1);
            border: 1px solid rgba(246, 70, 93, 0.3);
            color: var(--accent-red);
        }

        .toast-notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: linear-gradient(135deg, var(--accent-green), #0B8F5F);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            z-index: 10000;
            animation: slideIn 0.5s;
            max-width: 350px;
            display: none;
            white-space: pre-line;
        }

        .toast-notification.show {
            display: block;
        }

        @media (max-width: 768px) {
            .container { padding: 12px; }
            .hero-section h1 { font-size: 32px; }
            .nav-links { gap: 10px; }
            .nav-btn { padding: 8px 16px; font-size: 12px; }
            .payment-method-selector { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div id="toastNotification" class="toast-notification"></div>

<div id="referralSuccessBanner" class="referral-success-banner">
    <button class="close-banner" onclick="closeReferralBanner()">√ó</button>
    <div class="referral-success-content">
        <h2>üéâ CONGRATULATIONS! üéâ</h2>
        <p><strong id="referrerName">Your friend</strong> has been crushing it with CryptoPro!</p>
        <p>They're making <strong>consistent daily profits</strong> with our AI-powered trading bots.</p>
        <div class="bonus-highlight">GET $25 BONUS!</div>
        <p style="font-size: 18px; margin-top: 12px;">
            ‚úÖ Sign up now and receive <strong>$25 instant bonus</strong><br>
            ‚úÖ 100% withdrawable after verification<br>
            ‚úÖ Start trading with real profits from day one!
        </p>
    </div>
</div>

<!-- LAYER 1: Welcome Page -->
<div id="welcomeLayer" class="layer active">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('loginLayer')">Login</button>
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üöÄ The Future of Crypto Trading</h1>
            <p>Join 50,000+ successful traders earning daily profits with AI-powered automation. Get started with a <strong>$25 signup bonus</strong> and experience professional trading today!</p>
            <div class="hero-cta">
                <button class="hero-btn hero-btn-primary" onclick="showLayer('signupLayer')">Get Started - Free $25 Bonus</button>
                <button class="hero-btn hero-btn-secondary" onclick="showLayer('chartsLayer')">View Live Charts</button>
            </div>
        </div>

        <div class="live-traders-section">
            <div class="live-traders-title">üî• LIVE ACTIVE TRADERS - REAL-TIME PROFITS üî•</div>
            <div class="ticker-wrapper">
                <div class="ticker-content" id="liveTradersTicker"></div>
            </div>
        </div>

        <div class="top-winners-section">
            <div class="top-winners-title">üèÜ Top Traders This Week</div>
            <div class="winners-grid" id="topWinnersGrid"></div>
        </div>

        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-value">50,000+</div>
                    <div class="stat-label">Active Traders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value">$125M+</div>
                    <div class="stat-label">Total Profits Paid</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value">98.5%</div>
                    <div class="stat-label">Success Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚ö°</div>
                    <div class="stat-value">15,000+</div>
                    <div class="stat-label">Daily Trades</div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-btn btn-reviews" onclick="showLayer('reviewsLayer')">‚≠ê See Reviews</button>
            <button class="action-btn btn-trade" onclick="showLayer('signupLayer')">üìä Start Trading</button>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 2: Charts Page -->
<div id="chartsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>LIVE</span>
            </div>
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>

    <div class="container">
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">üìà BTC/USDT Live Chart</div>
            </div>
            <div class="price-info">
                <div>
                    <div class="current-price" id="currentPrice">$98,245.50</div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Bitcoin / USDT</div>
                </div>
                <div class="price-change positive" id="priceChange">+2.45%</div>
            </div>
            <div class="chart-labels">
                <div class="chart-label">High: <span id="chartHigh">$99,120</span></div>
                <div class="chart-label">Low: <span id="chartLow">$96,800</span></div>
                <div class="chart-label">Volume: <span id="chartVolume">28.5B</span></div>
                <div class="chart-label">Open: <span id="chartOpen">$97,850</span></div>
                <div class="chart-label">Close: <span id="chartClose">$98,245</span></div>
                <div class="chart-label">24h: <span id="chart24h">+2.45%</span></div>
            </div>
            <div class="chart-wrapper">
                <canvas id="chartCanvas"></canvas>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 3: Signup -->
<div id="signupLayer" class="layer">
    <div class="auth-container">
        <div style="text-align: center; margin-bottom: 32px;">
            <div style="font-size: 60px; margin-bottom: 12px; animation: pulse 2s infinite;">üíé</div>
            <div style="font-size: 32px; font-weight: 900; background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">CryptoPro</div>
        </div>
        <h2 style="text-align: center; margin-bottom: 24px; font-size: 24px; color: var(--accent-green);">Start Your Trading Journey</h2>
        <div id="signupAlert" class="alert"></div>
        <form id="signupForm" onsubmit="return handleSignup(event)">
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="signupName" placeholder="Enter your full name" required>
            </div>
            <div class="form-group">
                <label>Email Address</label>
                <input type="email" id="signupEmail" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" id="signupPhone" placeholder="+254 712 345 678" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="signupPassword" placeholder="Create strong password" required>
            </div>
            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" id="signupConfirm" placeholder="Re-enter password" required>
            </div>
            <div class="form-group">
                <label>Referral Code (Optional)</label>
                <input type="text" id="signupReferralCode" placeholder="Enter referral code">
            </div>
            <button type="submit" class="btn-submit">üöÄ Create Account & Get $25 Bonus</button>
        </form>
        <div style="text-align: center; margin-top: 24px; font-size: 14px; color: var(--text-secondary);">
            Already have an account? <a onclick="showLayer('loginLayer')" style="color: var(--accent-green); cursor: pointer; font-weight: 600;">Login Here</a>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 4: Login -->
<div id="loginLayer" class="layer">
    <div class="auth-container">
        <div style="text-align: center; margin-bottom: 32px;">
            <div style="font-size: 60px; margin-bottom: 12px; animation: pulse 2s infinite;">üíé</div>
            <div style="font-size: 32px; font-weight: 900; background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">CryptoPro</div>
        </div>
        <h2 style="text-align: center; margin-bottom: 24px; font-size: 24px; color: var(--accent-green);">Welcome Back</h2>
        <div id="loginAlert" class="alert"></div>
        <form id="loginForm" onsubmit="return handleLogin(event)">
            <div class="form-group">
                <label>Email Address</label>
                <input type="email" id="loginEmail" placeholder="your@email.com" required>
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password" required>
            </div>
            <button type="submit" class="btn-submit">üîê Login</button>
        </form>
        <div style="text-align: center; margin-top: 24px; font-size: 14px; color: var(--text-secondary);">
            Don't have an account? <a onclick="showLayer('signupLayer')" style="color: var(--accent-green); cursor: pointer; font-weight: 600;">Create Account</a>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 5: Dashboard -->
<div id="dashboardLayer" class="layer">
    <nav class="navbar">
        <div class="logo">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>LIVE</span>
            </div>
            <button class="nav-btn btn-login" onclick="handleLogout()">Logout</button>
        </div>
    </nav>

    <div class="container">
        <div style="background: var(--bg-secondary); padding: 20px; border-radius: 16px; margin-bottom: 24px; border: 1px solid var(--border-color);">
            <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); display: flex; align-items: center; justify-content: center; font-size: 24px;">üë§</div>
                    <div>
                        <div style="font-size: 18px; font-weight: 700; color: var(--text-primary);" id="userName">User</div>
                        <div style="font-size: 13px; color: var(--text-secondary);" id="userEmail">email@example.com</div>
                    </div>
                </div>
                
                <!-- Account Mode Switcher -->
                <div style="display: flex; gap: 8px; background: var(--bg-tertiary); padding: 6px; border-radius: 12px; border: 2px solid var(--border-color);">
                    <button id="switchToDemo" class="payment-method-btn active" onclick="switchAccount('demo')" style="padding: 10px 20px; margin: 0; font-size: 13px; min-width: 100px;">
                        üìä DEMO
                    </button>
                    <button id="switchToReal" class="payment-method-btn" onclick="switchAccount('real')" style="padding: 10px 20px; margin: 0; font-size: 13px; min-width: 100px;">
                        üíé REAL
                    </button>
                </div>
            </div>
        </div>

        <!-- Account Mode Indicator Banner -->
        <div class="account-mode-indicator" style="text-align: center; margin-bottom: 20px;"></div>

        <div style="background: linear-gradient(135deg, rgba(14, 203, 129, 0.2), rgba(0, 217, 255, 0.2)); border: 2px solid var(--accent-green); border-radius: 16px; padding: 24px; margin-bottom: 20px; text-align: center;">
            <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;">
                <span id="accountTypeLabel">DEMO</span> BALANCE
            </div>
            <div style="font-size: 56px; font-weight: 900; color: var(--accent-green); text-shadow: 0 0 20px rgba(14, 203, 129, 0.5); margin-bottom: 16px;" id="dashBalance">$25.00</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px;">
                <div style="background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 8px;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Available</div>
                    <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);" id="dashAvailable">$25.00</div>
                </div>
                <div style="background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 8px;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">In Trades</div>
                    <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">$0.00</div>
                </div>
                <div style="background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 8px;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Total Profit</div>
                    <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);" id="dashProfit">$0.00</div>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="action-btn btn-trade" onclick="showLayer('tradingLayer')">‚ö° Trade Now</button>
            <button class="action-btn btn-deposit" onclick="showLayer('depositLayer')">üí∞ Deposit</button>
            <button class="action-btn" style="background: linear-gradient(135deg, #10b981, #059669); color: white;" onclick="showLayer('botsLayer')">ü§ñ AI Bots</button>
        </div>

        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">üìà Live Market Overview</div>
            </div>
            <div class="chart-wrapper small">
                <canvas id="dashCanvas"></canvas>
            </div>
        </div>
        
        <!-- Additional Navigation -->
        <div class="action-buttons" style="margin-top: 20px;">
            <button class="action-btn" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white;" onclick="showLayer('historyLayer')">üìú Trade History</button>
            <button class="action-btn" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white;" onclick="showLayer('withdrawalLayer')">üí∏ Withdraw</button>
            <button class="action-btn" style="background: linear-gradient(135deg, #ec4899, #db2777); color: white;" onclick="showLayer('referralLayer')">üéÅ Referrals</button>
            <button class="action-btn" style="background: linear-gradient(135deg, #06b6d4, #0891b2); color: white;" onclick="showLayer('profileLayer')">‚öôÔ∏è Profile</button>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 6: Deposit -->
<div id="depositLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('dashboardLayer')">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üí∞ Deposit Funds</h1>
            <p>Fund your account instantly. Deposits are automatically credited within 5 minutes after verification.</p>
        </div>

        <div class="chart-section">
            <div style="background: rgba(251, 191, 36, 0.1); border: 2px solid rgba(251, 191, 36, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: center;">
                <div style="font-size: 24px; font-weight: 900; color: #fbbf24; margin-bottom: 8px;">üéâ 100% WELCOME BONUS!</div>
                <div style="font-size: 16px; color: var(--text-primary);">First deposit gets 100% match! Deposit $100, get $200 to trade!</div>
            </div>

            <form onsubmit="return processDeposit(event)">
                <div class="form-group">
                    <label>Deposit Amount (USD)</label>
                    <input type="number" id="depositAmount" min="10" step="0.01" placeholder="Minimum $10" required>
                </div>
                
                <div class="form-group">
                    <label>Select Payment Method</label>
                    <div class="payment-method-selector">
                        <button type="button" class="payment-method-btn" onclick="selectPaymentMethod('mpesa-phone')">
                            üì± M-Pesa<br><small style="font-size: 12px; opacity: 0.8;">+254759401893</small>
                        </button>
                        <button type="button" class="payment-method-btn" onclick="selectPaymentMethod('mpesa-till')">
                            üè™ M-Pesa Till<br><small style="font-size: 12px; opacity: 0.8;">7500448</small>
                        </button>
                        <button type="button" class="payment-method-btn" onclick="selectPaymentMethod('bank')">
                            üè¶ Bank Transfer<br><small style="font-size: 12px; opacity: 0.8;">Equity Bank</small>
                        </button>
                        <button type="button" class="payment-method-btn" onclick="selectPaymentMethod('crypto')">
                            ü™ô Crypto USDT<br><small style="font-size: 12px; opacity: 0.8;">TRC-20</small>
                        </button>
                    </div>
                </div>

                <!-- M-Pesa Phone Payment -->
                <div id="mpesa-phone" class="payment-details">
                    <div style="text-align: center; margin-bottom: 16px;">
                        <div style="font-size: 18px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">üì± M-Pesa Phone Number</div>
                        <div style="font-size: 14px; color: var(--text-secondary);">Send money directly to phone number</div>
                    </div>
                    <div class="payment-info">
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">Phone Number:</div>
                        <div class="payment-value">+254759401893</div>
                    </div>
                    <button type="button" class="copy-btn" onclick="copyToClipboard('+254759401893')">üìã Copy Phone Number</button>
                    <div style="background: rgba(14, 203, 129, 0.05); border-left: 4px solid var(--accent-green); padding: 16px; border-radius: 8px; margin-top: 16px;">
                        <div style="font-size: 14px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">How to Pay:</div>
                        <ol style="font-size: 13px; color: var(--text-primary); line-height: 1.8; margin-left: 20px;">
                            <li>Go to M-Pesa on your phone</li>
                            <li>Select "Send Money"</li>
                            <li>Enter: <strong>+254759401893</strong></li>
                            <li>Enter amount</li>
                            <li>Enter your M-Pesa PIN</li>
                            <li>Confirm transaction</li>
                            <li>Submit screenshot below</li>
                        </ol>
                    </div>
                </div>

                <!-- M-Pesa Till Payment -->
                <div id="mpesa-till" class="payment-details">
                    <div style="text-align: center; margin-bottom: 16px;">
                        <div style="font-size: 18px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">üè™ M-Pesa Till Number</div>
                        <div style="font-size: 14px; color: var(--text-secondary);">Pay to Till (Buy Goods & Services)</div>
                    </div>
                    <div class="payment-info">
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">Till Number:</div>
                        <div class="payment-value">7500448</div>
                    </div>
                    <button type="button" class="copy-btn" onclick="copyToClipboard('7500448')">üìã Copy Till Number</button>
                    <div style="background: rgba(14, 203, 129, 0.05); border-left: 4px solid var(--accent-green); padding: 16px; border-radius: 8px; margin-top: 16px;">
                        <div style="font-size: 14px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">How to Pay:</div>
                        <ol style="font-size: 13px; color: var(--text-primary); line-height: 1.8; margin-left: 20px;">
                            <li>Go to M-Pesa on your phone</li>
                            <li>Select "Lipa na M-Pesa"</li>
                            <li>Select "Buy Goods and Services"</li>
                            <li>Enter Till: <strong>7500448</strong></li>
                            <li>Enter amount</li>
                            <li>Enter your M-Pesa PIN</li>
                            <li>Confirm transaction</li>
                            <li>Submit screenshot below</li>
                        </ol>
                    </div>
                </div>

                <!-- Bank Transfer -->
                <div id="bank" class="payment-details">
                    <div style="text-align: center; margin-bottom: 16px;">
                        <div style="font-size: 18px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">üè¶ Bank Transfer Details</div>
                        <div style="font-size: 14px; color: var(--text-secondary);">Transfer to Equity Bank account</div>
                    </div>
                    <div class="payment-info">
                        <div style="margin-bottom: 12px;">
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Bank Name:</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">Equity Bank</div>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Account Name:</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">Felix Kiprotich Koskei</div>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Account Number:</div>
                            <div class="payment-value">0310184912409</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Branch:</div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">Any Equity Bank Branch</div>
                        </div>
                    </div>
                    <button type="button" class="copy-btn" onclick="copyToClipboard('0310184912409')">üìã Copy Account Number</button>
                </div>

                <!-- Crypto Payment -->
                <div id="crypto" class="payment-details">
                    <div style="text-align: center; margin-bottom: 16px;">
                        <div style="font-size: 18px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">ü™ô Crypto Payment (USDT)</div>
                        <div style="font-size: 14px; color: var(--text-secondary);">Send USDT on TRC-20 Network</div>
                    </div>
                    <div class="payment-info">
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">Network: <strong style="color: var(--accent-yellow);">TRC-20 (Tron)</strong></div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">Wallet Address:</div>
                        <div class="payment-value" style="font-size: 14px;">TK4rUz6TUEd7zCWeuiX5R47pSNdPswJnAc</div>
                    </div>
                    <button type="button" class="copy-btn" onclick="copyToClipboard('TK4rUz6TUEd7zCWeuiX5R47pSNdPswJnAc')">üìã Copy Wallet Address</button>
                    <div style="background: rgba(246, 70, 93, 0.1); border: 2px solid rgba(246, 70, 93, 0.3); border-radius: 12px; padding: 16px; margin-top: 16px;">
                        <div style="font-size: 13px; font-weight: 700; color: var(--accent-red); margin-bottom: 8px;">‚ö†Ô∏è IMPORTANT:</div>
                        <div style="font-size: 13px; color: var(--text-primary); line-height: 1.6;">
                            ‚Ä¢ Only send USDT on <strong>TRC-20 network</strong><br>
                            ‚Ä¢ Sending on wrong network will result in loss of funds<br>
                            ‚Ä¢ Double-check the address before sending
                        </div>
                    </div>
                </div>

                <div style="background: rgba(14, 203, 129, 0.1); border: 2px solid rgba(14, 203, 129, 0.3); border-radius: 12px; padding: 20px; margin: 20px 0;">
                    <div style="font-size: 16px; font-weight: 700; color: var(--accent-green); margin-bottom: 12px; text-align: center;">‚úÖ AUTOMATIC DEPOSIT PROCESS</div>
                    <div style="font-size: 14px; color: var(--text-primary); line-height: 1.8; text-align: center;">
                        After completing your payment, submit the screenshot below.<br>
                        Your deposit will be <strong>automatically credited to your account</strong><br>
                        within <strong>5 minutes</strong> after verification.
                    </div>
                </div>

                <div class="form-group">
                    <label>Payment Proof Screenshot</label>
                    <textarea id="depositProof" rows="4" placeholder="Paste your payment screenshot or describe your transaction here..." required style="min-height: 100px;"></textarea>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        üì∏ Required: Screenshot of payment confirmation for automatic verification
                    </div>
                </div>

                <button type="submit" class="btn-submit">‚úÖ SUBMIT DEPOSIT REQUEST</button>
            </form>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 7: Trading Interface -->
<div id="tradingLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>LIVE TRADING</span>
            </div>
            <button class="nav-btn btn-login" onclick="showLayer('dashboardLayer')">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; margin-bottom: 20px;">
            <!-- Trading Chart -->
            <div class="chart-section">
                <div class="chart-header">
                    <div class="chart-title">üìà BTC/USDT Live Chart</div>
                </div>
                <div class="price-info">
                    <div>
                        <div class="current-price" id="tradePrice">$98,245.50</div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Bitcoin / USDT</div>
                    </div>
                    <div class="price-change positive" id="tradePriceChange">+2.45%</div>
                </div>
                <div class="chart-wrapper">
                    <canvas id="tradeCanvas"></canvas>
                </div>
            </div>

            <!-- Trading Panel -->
            <div class="chart-section">
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 20px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">‚ö° Quick Trade</div>
                    <div style="font-size: 13px; color: var(--text-secondary);">AI-Powered Instant Execution</div>
                </div>

                <!-- Buy/Sell Tabs -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
                    <button id="buyTab" class="payment-method-btn active" onclick="switchTradeTab('buy')">
                        üìà BUY
                    </button>
                    <button id="sellTab" class="payment-method-btn" onclick="switchTradeTab('sell')">
                        üìâ SELL
                    </button>
                </div>

                <form id="tradeForm" onsubmit="return executeTrade(event)">
                    <div class="form-group">
                        <label>Investment Amount (USD)</label>
                        <input type="number" id="tradeAmount" min="10" step="0.01" placeholder="Min: $10" required>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                            Available: $<span id="availableBalance">25.00</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Leverage</label>
                        <select id="tradeLeverage">
                            <option value="1">1x (No Leverage)</option>
                            <option value="2">2x (Double)</option>
                            <option value="5" selected>5x (Recommended)</option>
                            <option value="10">10x (High Risk)</option>
                            <option value="20">20x (Expert Only)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Trade Duration</label>
                        <select id="tradeDuration">
                            <option value="60">1 Minute (60s)</option>
                            <option value="300" selected>5 Minutes (300s)</option>
                            <option value="900">15 Minutes (900s)</option>
                            <option value="1800">30 Minutes (1800s)</option>
                            <option value="3600">1 Hour (3600s)</option>
                        </select>
                    </div>

                    <!-- Profit Calculator -->
                    <div style="background: rgba(14, 203, 129, 0.1); border: 2px solid rgba(14, 203, 129, 0.3); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; text-align: center;">
                            <div>
                                <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Potential Profit</div>
                                <div style="font-size: 20px; font-weight: 700; color: var(--accent-green);" id="potentialProfit">$0.00</div>
                            </div>
                            <div>
                                <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">ROI</div>
                                <div style="font-size: 20px; font-weight: 700; color: var(--accent-yellow);" id="potentialROI">0%</div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn-submit" id="tradeButton" style="background: linear-gradient(135deg, var(--accent-green), #0B8F5F);">
                        üöÄ EXECUTE BUY TRADE
                    </button>
                </form>

                <!-- Quick Amount Buttons -->
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 16px;">
                    <button onclick="setTradeAmount(10)" style="padding: 8px; border: 1px solid var(--border-color); background: var(--bg-tertiary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 12px;">$10</button>
                    <button onclick="setTradeAmount(25)" style="padding: 8px; border: 1px solid var(--border-color); background: var(--bg-tertiary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 12px;">$25</button>
                    <button onclick="setTradeAmount(50)" style="padding: 8px; border: 1px solid var(--border-color); background: var(--bg-tertiary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 12px;">$50</button>
                    <button onclick="setTradeAmount(100)" style="padding: 8px; border: 1px solid var(--border-color); background: var(--bg-tertiary); color: var(--text-primary); border-radius: 8px; cursor: pointer; font-size: 12px;">$100</button>
                </div>
            </div>
        </div>

        <!-- Active Trades -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">üìä Active Trades</div>
            </div>
            <div id="activeTradesContainer"></div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 7B: AI Bots Dashboard -->
<div id="botsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <div class="status-badge">
                <span class="status-dot"></span>
                <span>AI BOTS</span>
            </div>
            <button class="nav-btn btn-login" onclick="showLayer('dashboardLayer')">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>ü§ñ AI Trading Bots</h1>
            <p>Fully automated trading with advanced AI algorithms. Set it and forget it - earn profits 24/7!</p>
        </div>

        <div style="text-align: center; margin-bottom: 24px;">
            <button onclick="showBotSelector()" class="hero-btn hero-btn-primary" style="font-size: 18px; padding: 20px 40px;">
                ‚ûï Activate New Bot
            </button>
        </div>

        <!-- Bot Stats Overview -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">ü§ñ</div>
                    <div class="stat-value" id="totalActiveBots">0</div>
                    <div class="stat-label">Active Bots</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-value" id="totalBotTrades">0</div>
                    <div class="stat-label">Bot Trades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="totalBotProfit">$0.00</div>
                    <div class="stat-label">Total Bot Profit</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="botWinRate">0%</div>
                    <div class="stat-label">Overall Win Rate</div>
                </div>
            </div>
        </div>

        <!-- Active Bots -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">ü§ñ Your Active Bots</div>
            </div>
            <div id="botDashboardContainer"></div>
        </div>

        <!-- How Bots Work -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">‚ÑπÔ∏è How AI Bots Work</div>
            </div>
            <div style="background: var(--bg-tertiary); border-radius: 12px; padding: 24px;">
                <div style="display: grid; gap: 20px;">
                    <div style="display: flex; align-items: flex-start; gap: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent-green), #0B8F5F); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0;">1Ô∏è‚É£</div>
                        <div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Choose Your Bot</div>
                            <div style="font-size: 14px; color: var(--text-secondary); line-height: 1.6;">Select from 4 AI trading bots based on your risk tolerance and profit goals.</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; gap: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent-green), #0B8F5F); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0;">2Ô∏è‚É£</div>
                        <div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Activate & Relax</div>
                            <div style="font-size: 14px; color: var(--text-secondary); line-height: 1.6;">The bot automatically analyzes markets and executes profitable trades 24/7.</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; gap: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent-green), #0B8F5F); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0;">3Ô∏è‚É£</div>
                        <div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Watch Profits Grow</div>
                            <div style="font-size: 14px; color: var(--text-secondary); line-height: 1.6;">Track your bot's performance in real-time and withdraw profits anytime.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 8: Trade History -->
<div id="historyLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('dashboardLayer')">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üìú Trade History</h1>
            <p>Complete record of all your trading activity and performance</p>
        </div>

        <!-- Stats Summary -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-value" id="historyTotalTrades">0</div>
                    <div class="stat-label">Total Trades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-value" id="historyWinRate">0%</div>
                    <div class="stat-label">Win Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="historyTotalProfit">$0.00</div>
                    <div class="stat-label">Total Profit</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-value" id="historyBestTrade">$0.00</div>
                    <div class="stat-label">Best Trade</div>
                </div>
            </div>
        </div>

        <!-- Trade History Table -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">Recent Trades</div>
            </div>
            <div id="tradeHistoryTable"></div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 9: Withdrawal -->
<div id="withdrawalLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('dashboardLayer')">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üí∏ Withdraw Funds</h1>
            <p>Fast and secure withdrawals. Funds processed within 24 hours.</p>
        </div>

        <div class="chart-section">
            <div style="background: rgba(14, 203, 129, 0.1); border: 2px solid rgba(14, 203, 129, 0.3); border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: center;">
                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">Available for Withdrawal</div>
                <div style="font-size: 48px; font-weight: 900; color: var(--accent-green);" id="withdrawAvailable">$0.00</div>
            </div>

            <form id="withdrawalForm" onsubmit="return processWithdrawal(event)">
                <div class="form-group">
                    <label>Withdrawal Amount (USD)</label>
                    <input type="number" id="withdrawAmount" min="50" step="0.01" placeholder="Minimum $50" required>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">
                        Minimum withdrawal: $50 | Maximum: $<span id="maxWithdraw">0.00</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Withdrawal Method</label>
                    <div class="payment-method-selector">
                        <button type="button" class="payment-method-btn" onclick="selectWithdrawMethod('mpesa')">
                            üì± M-Pesa
                        </button>
                        <button type="button" class="payment-method-btn" onclick="selectWithdrawMethod('bank')">
                            üè¶ Bank Transfer
                        </button>
                        <button type="button" class="payment-method-btn" onclick="selectWithdrawMethod('crypto')">
                            ü™ô Crypto (USDT)
                        </button>
                    </div>
                </div>

                <!-- M-Pesa Withdrawal -->
                <div id="withdraw-mpesa" class="payment-details">
                    <div class="form-group">
                        <label>M-Pesa Phone Number</label>
                        <input type="tel" id="withdrawMpesaPhone" placeholder="+254 712 345 678" required>
                    </div>
                    <div class="form-group">
                        <label>Full Name (as registered on M-Pesa)</label>
                        <input type="text" id="withdrawMpesaName" placeholder="Enter full name" required>
                    </div>
                </div>

                <!-- Bank Withdrawal -->
                <div id="withdraw-bank" class="payment-details">
                    <div class="form-group">
                        <label>Bank Name</label>
                        <input type="text" id="withdrawBankName" placeholder="e.g., Equity Bank" required>
                    </div>
                    <div class="form-group">
                        <label>Account Number</label>
                        <input type="text" id="withdrawBankAccount" placeholder="Enter account number" required>
                    </div>
                    <div class="form-group">
                        <label>Account Name</label>
                        <input type="text" id="withdrawBankAccountName" placeholder="Full name on account" required>
                    </div>
                    <div class="form-group">
                        <label>Branch</label>
                        <input type="text" id="withdrawBankBranch" placeholder="Bank branch" required>
                    </div>
                </div>

                <!-- Crypto Withdrawal -->
                <div id="withdraw-crypto" class="payment-details">
                    <div class="form-group">
                        <label>USDT Wallet Address (TRC-20)</label>
                        <input type="text" id="withdrawCryptoAddress" placeholder="TRC-20 USDT wallet address" required>
                    </div>
                    <div style="background: rgba(246, 70, 93, 0.1); border: 2px solid rgba(246, 70, 93, 0.3); border-radius: 12px; padding: 16px; margin-top: 12px;">
                        <div style="font-size: 13px; font-weight: 700; color: var(--accent-red); margin-bottom: 8px;">‚ö†Ô∏è IMPORTANT:</div>
                        <div style="font-size: 13px; color: var(--text-primary); line-height: 1.6;">
                            ‚Ä¢ Only TRC-20 USDT addresses are supported<br>
                            ‚Ä¢ Double-check your wallet address<br>
                            ‚Ä¢ Wrong address = Lost funds (non-recoverable)
                        </div>
                    </div>
                </div>

                <div style="background: rgba(0, 217, 255, 0.1); border: 2px solid rgba(0, 217, 255, 0.3); border-radius: 12px; padding: 20px; margin: 20px 0;">
                    <div style="font-size: 14px; font-weight: 700; color: var(--accent-blue); margin-bottom: 12px;">‚ÑπÔ∏è Withdrawal Information</div>
                    <div style="font-size: 13px; color: var(--text-primary); line-height: 1.8;">
                        ‚Ä¢ Minimum withdrawal: $50<br>
                        ‚Ä¢ Processing time: 24-48 hours<br>
                        ‚Ä¢ Withdrawal fee: 2% (deducted from amount)<br>
                        ‚Ä¢ First withdrawal requires account verification<br>
                        ‚Ä¢ Contact support if you have questions
                    </div>
                </div>

                <button type="submit" class="btn-submit">üí∏ REQUEST WITHDRAWAL</button>
            </form>
        </div>

        <!-- Recent Withdrawals -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">Recent Withdrawals</div>
            </div>
            <div id="withdrawalHistoryContainer"></div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 10: Referrals -->
<div id="referralLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('dashboardLayer')">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>üéÅ Refer & Earn</h1>
            <p>Invite friends and earn <strong>20% commission</strong> on all their trading fees for life!</p>
        </div>

        <!-- Referral Stats -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-value" id="totalReferrals">0</div>
                    <div class="stat-label">Total Referrals</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="referralEarnings">$0.00</div>
                    <div class="stat-label">Total Earnings</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="activeReferrals">0</div>
                    <div class="stat-label">Active Traders</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-value">20%</div>
                    <div class="stat-label">Commission Rate</div>
                </div>
            </div>
        </div>

        <!-- Referral Link -->
        <div class="chart-section">
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 20px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">Your Referral Link</div>
                <div style="font-size: 13px; color: var(--text-secondary);">Share this link to earn commissions</div>
            </div>

            <div style="background: rgba(14, 203, 129, 0.1); border: 2px solid rgba(14, 203, 129, 0.3); border-radius: 12px; padding: 20px;">
                <div class="payment-info">
                    <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">Your Referral Code:</div>
                    <div class="payment-value" id="referralCode">CRP123456</div>
                </div>
                <div class="payment-info" style="margin-top: 12px;">
                    <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">Your Referral Link:</div>
                    <div class="payment-value" style="font-size: 14px;" id="referralLink">https://cryptopro.com/?ref=CRP123456</div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 16px;">
                    <button class="copy-btn" onclick="copyReferralCode()">üìã Copy Code</button>
                    <button class="copy-btn" onclick="copyReferralLink()">üîó Copy Link</button>
                </div>
            </div>

            <!-- Share Buttons -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 20px;">
                <button onclick="shareWhatsApp()" style="padding: 16px; background: linear-gradient(135deg, #25D366, #128C7E); color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                    üí¨ Share on WhatsApp
                </button>
                <button onclick="shareTelegram()" style="padding: 16px; background: linear-gradient(135deg, #0088cc, #0066aa); color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                    ‚úàÔ∏è Share on Telegram
                </button>
            </div>
        </div>

        <!-- How It Works -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">üí° How Referral Program Works</div>
            </div>
            <div style="background: var(--bg-tertiary); border-radius: 12px; padding: 24px;">
                <div style="display: grid; gap: 20px;">
                    <div style="display: flex; align-items: flex-start; gap: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent-green), #0B8F5F); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0;">1Ô∏è‚É£</div>
                        <div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Share Your Link</div>
                            <div style="font-size: 14px; color: var(--text-secondary); line-height: 1.6;">Copy your unique referral link and share it with friends, family, or on social media.</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; gap: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent-green), #0B8F5F); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0;">2Ô∏è‚É£</div>
                        <div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">They Sign Up & Trade</div>
                            <div style="font-size: 14px; color: var(--text-secondary); line-height: 1.6;">When someone signs up using your link and starts trading, they become your referral.</div>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; gap: 16px;">
                        <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent-green), #0B8F5F); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0;">3Ô∏è‚É£</div>
                        <div>
                            <div style="font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">Earn 20% Commission</div>
                            <div style="font-size: 14px; color: var(--text-secondary); line-height: 1.6;">You earn 20% of all trading fees from your referrals - for life! Paid instantly to your account.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Referral List -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">üë• Your Referrals</div>
            </div>
            <div id="referralListContainer"></div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 11: Reviews/Testimonials (CONTINUED) -->
<div id="reviewsLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('welcomeLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-signup" onclick="showLayer('signupLayer')">Sign Up</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>‚≠ê What Our Traders Say</h1>
            <p>Real reviews from real traders making real profits with CryptoPro</p>
            <div style="display: flex; justify-content: center; gap: 8px; margin-top: 16px; font-size: 40px;">
                ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
            </div>
            <div style="font-size: 18px; font-weight: 700; color: var(--accent-green); margin-top: 12px;">4.9/5.0 Rating from 15,000+ Reviews</div>
        </div>

        <div id="reviewsGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px;"></div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<!-- LAYER 12: Profile/Settings -->
<div id="profileLayer" class="layer">
    <nav class="navbar">
        <div class="logo" onclick="showLayer('dashboardLayer')">
            <div class="logo-icon">‚Çø</div>
            <span>CryptoPro</span>
        </div>
        <div class="nav-links">
            <button class="nav-btn btn-login" onclick="showLayer('dashboardLayer')">‚Üê Dashboard</button>
        </div>
    </nav>

    <div class="container">
        <div class="hero-section">
            <h1>‚öôÔ∏è Account Settings</h1>
            <p>Manage your profile and trading preferences</p>
        </div>

        <!-- Account Info -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">üë§ Account Information</div>
            </div>
            <div style="background: var(--bg-tertiary); border-radius: 12px; padding: 24px;">
                <div style="display: grid; gap: 16px;">
                    <div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Full Name</div>
                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary);" id="profileName">-</div>
                    </div>
                    <div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Email</div>
                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary);" id="profileEmail">-</div>
                    </div>
                    <div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Phone</div>
                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary);" id="profilePhone">-</div>
                    </div>
                    <div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Referral Code</div>
                        <div style="font-size: 16px; font-weight: 600; color: var(--accent-green);" id="profileReferralCode">-</div>
                    </div>
                    <div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">Member Since</div>
                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary);" id="profileJoinDate">-</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Stats -->
        <div class="stats-section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üí∞</div>
                    <div class="stat-value" id="profileBalance">$0.00</div>
                    <div class="stat-label">Current Balance</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-value" id="profileTotalTrades">0</div>
                    <div class="stat-label">Total Trades</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìà</div>
                    <div class="stat-value" id="profileTotalProfit">$0.00</div>
                    <div class="stat-label">Total Profit</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üë•</div>
                    <div class="stat-value" id="profileReferrals">0</div>
                    <div class="stat-label">Referrals</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="action-buttons">
            <button class="action-btn btn-trade" onclick="showLayer('tradingLayer')">‚ö° Start Trading</button>
            <button class="action-btn btn-deposit" onclick="showLayer('depositLayer')">üí∞ Deposit Funds</button>
            <button class="action-btn" style="background: linear-gradient(135deg, var(--accent-red), #cc0055); color: white;" onclick="handleLogout()">üö™ Logout</button>
        </div>

        <!-- Verification Status -->
        <div class="chart-section">
            <div class="chart-header">
                <div class="chart-title">‚úÖ Account Verification</div>
            </div>
            <div style="background: var(--bg-tertiary); border-radius: 12px; padding: 24px;">
                <div style="background: rgba(14, 203, 129, 0.1); border: 2px solid rgba(14, 203, 129, 0.3); border-radius: 12px; padding: 20px; text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 12px;">‚úÖ</div>
                    <div style="font-size: 18px; font-weight: 700; color: var(--accent-green); margin-bottom: 8px;">Account Verified</div>
                    <div style="font-size: 14px; color: var(--text-primary);">Your account is fully verified and ready for trading & withdrawals</div>
                </div>
            </div>
        </div>
    </div>

    <div class="whatsapp-support">
        <a href="https://wa.me/254759401893" class="whatsapp-btn" target="_blank">
            <span style="font-size: 28px;">üí¨</span>
            <span>Support</span>
        </a>
    </div>
</div>

<script>
// ==================== COMPLETE JAVASCRIPT - ALL FEATURES ====================

// ==================== GLOBAL STATE ====================
let currentUser = null;
let accountMode = 'demo'; // 'demo' or 'real'
let demoBalance = 25.00;
let demoProfit = 0.00;
let realBalance = 0.00;
let realProfit = 0.00;
let currentBalance = 25.00;
let currentProfit = 0.00;

const MPESA_NUMBER = '+254759401893';
const MPESA_TILL = '7500448';

let chartAnimationFrame = null;
let chartDataPoints = [];
let chartOffset = 0;
let lastUpdateTime = 0;
const UPDATE_INTERVAL = 2000; // Update every 2 seconds

// Trading
let currentTradeType = 'buy';
let activeTrades = [];
let tradeHistory = [];
let demoTradeHistory = [];
let realTradeHistory = [];

// Bots
let tradingBots = [];
let demoTradingBots = [];
let realTradingBots = [];
let botInterval = null;

// Other
let referrals = [];
let withdrawalHistory = [];
let selectedPaymentMethod = null;
let selectedWithdrawMethod = null;
let priceUpdateInterval = null;

// ==================== BOT CONFIGURATIONS ====================
const BOT_CONFIGS = {
    conservative: {
        name: 'Conservative Bot',
        icon: 'üõ°Ô∏è',
        minAmount: 10,
        maxAmount: 50,
        winRate: 0.75,
        profitRange: [0.03, 0.08],
        tradeInterval: 300000, // 5 minutes
        description: 'Low risk, steady gains'
    },
    balanced: {
        name: 'Balanced Bot',
        icon: '‚öñÔ∏è',
        minAmount: 20,
        maxAmount: 100,
        winRate: 0.70,
        profitRange: [0.05, 0.12],
        tradeInterval: 180000, // 3 minutes
        description: 'Medium risk, balanced returns'
    },
    aggressive: {
        name: 'Aggressive Bot',
        icon: 'üöÄ',
        minAmount: 50,
        maxAmount: 200,
        winRate: 0.65,
        profitRange: [0.08, 0.20],
        tradeInterval: 120000, // 2 minutes
        description: 'High risk, high rewards'
    },
    scalper: {
        name: 'Scalper Bot',
        icon: '‚ö°',
        minAmount: 10,
        maxAmount: 30,
        winRate: 0.80,
        profitRange: [0.02, 0.05],
        tradeInterval: 60000, // 1 minute
        description: 'Quick trades, small consistent wins'
    }
};

// ==================== INITIALIZATION ====================
window.onload = function() {
    const urlParams = new URLSearchParams(window.location.search);
    const referralCode = urlParams.get('ref');
    if (referralCode) {
        const signupRef = document.getElementById('signupReferralCode');
        if (signupRef) signupRef.value = referralCode;
        const referrerNames = ['John', 'Sarah', 'Michael', 'David', 'James', 'Emma', 'Felix', 'Mary'];
        const randomName = referrerNames[Math.floor(Math.random() * referrerNames.length)];
        const referrerNameEl = document.getElementById('referrerName');
        if (referrerNameEl) referrerNameEl.textContent = randomName;
        const banner = document.getElementById('referralSuccessBanner');
        if (banner) banner.classList.add('show');
    }
    initWelcomePage();
    
    const saved = localStorage.getItem('cryptoproUser');
    if (saved) {
        currentUser = JSON.parse(saved);
        demoBalance = currentUser.demoBalance || 25.00;
        demoProfit = currentUser.demoProfit || 0.00;
        realBalance = currentUser.realBalance || 0.00;
        realProfit = currentUser.realProfit || 0.00;
        accountMode = currentUser.accountMode || 'demo';
        updateAccountReferences();
        loadUserData();
    }
    
    initializeChartData();
};

function closeReferralBanner() {
    const banner = document.getElementById('referralSuccessBanner');
    if (banner) banner.classList.remove('show');
}

function showToast(message, type = 'success') {
    const toast = document.getElementById('toastNotification');
    if (!toast) return;
    
    toast.textContent = message;
    toast.style.background = type === 'success' 
        ? 'linear-gradient(135deg, var(--accent-green), #0B8F5F)' 
        : 'linear-gradient(135deg, var(--accent-red), #cc0055)';
    toast.classList.add('show');
    
    setTimeout(() => {
        toast.style.animation = 'fadeOut 0.5s';
        setTimeout(() => {
            toast.classList.remove('show');
            toast.style.animation = '';
        }, 500);
    }, 4000);
}

// ==================== DEMO/REAL ACCOUNT SYSTEM ====================
function updateAccountReferences() {
    if (accountMode === 'demo') {
        currentBalance = demoBalance;
        currentProfit = demoProfit;
        tradeHistory = demoTradeHistory;
        tradingBots = demoTradingBots;
    } else {
        currentBalance = realBalance;
        currentProfit = realProfit;
        tradeHistory = realTradeHistory;
        tradingBots = realTradingBots;
    }
}

function switchAccount(mode) {
    if (mode === accountMode) return;
    
    // Save current mode data
    if (accountMode === 'demo') {
        demoBalance = currentBalance;
        demoProfit = currentProfit;
        demoTradeHistory = [...tradeHistory];
        demoTradingBots = [...tradingBots];
    } else {
        realBalance = currentBalance;
        realProfit = currentProfit;
        realTradeHistory = [...tradeHistory];
        realTradingBots = [...tradingBots];
    }
    
    // Switch mode
    accountMode = mode;
    updateAccountReferences();
    
    // Stop all bots when switching
    if (botInterval) {
        clearInterval(botInterval);
        botInterval = null;
    }
    
    // Update UI
    updateAccountModeUI();
    updateDashboardBalance();
    saveUserData();
    
    // Show notification
    if (mode === 'demo') {
        showToast('üìä Switched to DEMO Account\nüí∞ Practice with virtual money', 'success');
    } else {
        showToast('üíé Switched to REAL Account\nüí∞ Trade with real money', 'success');
    }
    
    // Restart bots if any were active
    const hasActiveBots = tradingBots.some(b => b.active);
    if (hasActiveBots) {
        startBotTrading();
    }
}

function updateAccountModeUI() {
    const indicators = document.querySelectorAll('.account-mode-indicator');
    indicators.forEach(indicator => {
        if (accountMode === 'demo') {
            indicator.innerHTML = `
                <div style="background: rgba(59, 130, 246, 0.2); border: 2px solid rgba(59, 130, 246, 0.5); padding: 8px 16px; border-radius: 8px; display: inline-flex; align-items: center; gap: 8px;">
                    <span style="font-size: 12px; font-weight: 700; color: #3b82f6;">üìä DEMO ACCOUNT</span>
                </div>
            `;
        } else {
            indicator.innerHTML = `
                <div style="background: rgba(251, 191, 36, 0.2); border: 2px solid rgba(251, 191, 36, 0.5); padding: 8px 16px; border-radius: 8px; display: inline-flex; align-items: center; gap: 8px;">
                    <span style="font-size: 12px; font-weight: 700; color: #fbbf24;">üíé REAL ACCOUNT</span>
                </div>
            `;
        }
    });
    
    const demoBtn = document.getElementById('switchToDemo');
    const realBtn = document.getElementById('switchToReal');
    const accountLabel = document.getElementById('accountTypeLabel');
    
    if (demoBtn && realBtn) {
        if (accountMode === 'demo') {
            demoBtn.classList.add('active');
            realBtn.classList.remove('active');
        } else {
            realBtn.classList.add('active');
            demoBtn.classList.remove('active');
        }
    }
    
    if (accountLabel) {
        accountLabel.textContent = accountMode.toUpperCase();
    }
    
    const availableEl = document.getElementById('dashAvailable');
    if (availableEl) availableEl.textContent = '$' + currentBalance.toFixed(2);
}

// ==================== LAYER SWITCHING ====================
function showLayer(layerId) {
    // Stop chart animation
    if (chartAnimationFrame) {
        cancelAnimationFrame(chartAnimationFrame);
        chartAnimationFrame = null;
    }
    stopPriceUpdates();
    
    document.querySelectorAll('.layer').forEach(layer => {
        layer.classList.remove('active');
    });
    
    const targetLayer = document.getElementById(layerId);
    if (targetLayer) {
        targetLayer.classList.add('active');
        
        if (layerId === 'dashboardLayer') {
            if (currentUser) {
                const userNameEl = document.getElementById('userName');
                const userEmailEl = document.getElementById('userEmail');
                const balanceEl = document.getElementById('dashBalance');
                const profitEl = document.getElementById('dashProfit');
                if (userNameEl) userNameEl.textContent = currentUser.name;
                if (userEmailEl) userEmailEl.textContent = currentUser.email;
                if (balanceEl) balanceEl.textContent = '$' + currentBalance.toFixed(2);
                if (profitEl) profitEl.textContent = '$' + currentProfit.toFixed(2);
                updateAccountModeUI();
            }
            setTimeout(() => startChartAnimation('dashCanvas'), 100);
        }
        
        if (layerId === 'chartsLayer') {
            setTimeout(() => {
                startChartAnimation('chartCanvas');
                startPriceUpdates();
            }, 100);
        }
        
        if (layerId === 'tradingLayer') {
            updateDashboardBalance();
            setTimeout(() => {
                startChartAnimation('tradeCanvas');
                startPriceUpdates();
                updateActiveTrades();
            }, 100);
        }
        
        if (layerId === 'botsLayer') {
            updateBotStats();
            updateBotDashboard();
        }
        
        if (layerId === 'historyLayer') {
            updateTradeHistory();
        }
        
        if (layerId === 'withdrawalLayer') {
            updateDashboardBalance();
            updateWithdrawalHistory();
        }
        
        if (layerId === 'referralLayer') {
            updateReferralStats();
        }
        
        if (layerId === 'reviewsLayer') {
            generateReviews();
        }
        
        if (layerId === 'profileLayer') {
            updateProfilePage();
        }
    }
}

// ==================== CHART ANIMATION (REALISTIC SPEED) ====================
function initializeChartData() {
    let basePrice = 98000;
    for (let i = 0; i < 200; i++) {
        const change = (Math.random() - 0.5) * 500;
        basePrice += change;
        chartDataPoints.push(basePrice);
    }
}

function startChartAnimation(canvasId) {
    const canvas = document.getElementById(canvasId);
    if (!canvas) return;
    
    lastUpdateTime = Date.now();
    
    function animate() {
        const now = Date.now();
        drawAnimatedChart(canvas);
        
        if (now - lastUpdateTime >= UPDATE_INTERVAL) {
            const lastPrice = chartDataPoints[chartDataPoints.length - 1];
            const changePercent = (Math.random() - 0.5) * 0.01;
            const change = lastPrice * changePercent;
            const newPrice = lastPrice + change;
            
            chartDataPoints.push(newPrice);
            if (chartDataPoints.length > 200) {
                chartDataPoints.shift();
            }
            
            lastUpdateTime = now;
        }
        
        chartOffset += 0.1;
        if (chartOffset > 10) chartOffset = 0;
        
        chartAnimationFrame = requestAnimationFrame(animate);
    }
    
    animate();
}

function drawAnimatedChart(canvas) {
    const ctx = canvas.getContext('2d');
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
    
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    const data = chartDataPoints.slice(-100);
    const max = Math.max(...data);
    const min = Math.min(...data);
    const range = max - min || 1;
    
    const padding = 20;
    const chartWidth = canvas.width - padding * 2;
    const chartHeight = canvas.height - padding * 2;
    
    // Draw grid
    ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
    ctx.lineWidth = 1;
    for (let i = 0; i <= 5; i++) {
        const y = padding + (chartHeight / 5) * i;
        ctx.beginPath();
        ctx.moveTo(padding, y);
        ctx.lineTo(canvas.width - padding, y);
        ctx.stroke();
    }
    
    for (let i = 0; i <= 10; i++) {
        const x = padding + (chartWidth / 10) * i;
        ctx.beginPath();
        ctx.moveTo(x, padding);
        ctx.lineTo(x, canvas.height - padding);
        ctx.stroke();
    }
    
    // Draw candlesticks
    const candleWidth = (chartWidth / data.length) * 0.6;
    const spacing = chartWidth / data.length;
    
    data.forEach((price, index) => {
        if (index === 0) return;
        
        const x = padding + index * spacing;
        const open = data[index - 1];
        const close = price;
        
        const wickRange = Math.abs(close - open) * 0.3;
        const high = Math.max(open, close) + wickRange * Math.random();
        const low = Math.min(open, close) - wickRange * Math.random();
        
        const isBullish = close >= open;
        const color = isBullish ? '#0ECB81' : '#F6465D';
        
        const openY = padding + ((max - open) / range) * chartHeight;
        const closeY = padding + ((max - close) / range) * chartHeight;
        const highY = padding + ((max - high) / range) * chartHeight;
        const lowY = padding + ((max - low) / range) * chartHeight;
        
        // Draw wick
        ctx.strokeStyle = color;
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(x, highY);
        ctx.lineTo(x, lowY);
        ctx.stroke();
        
        // Draw body
        ctx.fillStyle = color;
        const bodyHeight = Math.abs(closeY - openY);
        const bodyY = Math.min(openY, closeY);
        ctx.fillRect(x - candleWidth / 2, bodyY, candleWidth, Math.max(bodyHeight, 1));
        
        if (!isBullish && bodyHeight > 2) {
            ctx.fillStyle = '#0B0E11';
            ctx.fillRect(x - candleWidth / 2 + 1, bodyY + 1, candleWidth - 2, Math.max(bodyHeight - 2, 0));
        }
    });
    
    // Draw volume bars
    const volumeHeight = 40;
    const volumeTop = canvas.height - padding - volumeHeight;
    
    data.forEach((price, index) => {
        if (index === 0) return;
        
        const x = padding + index * spacing;
        const volume = 0.3 + Math.random() * 0.7;
        const barHeight = volume * volumeHeight;
        const isBullish = index > 0 ? price >= data[index - 1] : true;
        const color = isBullish ? 'rgba(14, 203, 129, 0.3)' : 'rgba(246, 70, 93, 0.3)';
        
        ctx.fillStyle = color;
        ctx.fillRect(x - candleWidth / 2, volumeTop + volumeHeight - barHeight, candleWidth, barHeight);
    });
    
    // Draw line
    ctx.strokeStyle = 'rgba(0, 217, 255, 0.5)';
    ctx.lineWidth = 1.5;
    ctx.beginPath();
    data.forEach((price, index) => {
        const x = padding + index * spacing;
        const y = padding + ((max - price) / range) * chartHeight;
        if (index === 0) {
            ctx.moveTo(x, y);
        } else {
            ctx.lineTo(x, y);
        }
    });
    ctx.stroke();
}

function updatePriceInfo() {
    const currentPrice = chartDataPoints[chartDataPoints.length - 1];
    const prevPrice = chartDataPoints[chartDataPoints.length - 20] || currentPrice;
    const change = ((currentPrice - prevPrice) / prevPrice * 100);
    
    const priceEl = document.getElementById('currentPrice');
    const changeEl = document.getElementById('priceChange');
    const highEl = document.getElementById('chartHigh');
    const lowEl = document.getElementById('chartLow');
    const volumeEl = document.getElementById('chartVolume');
    const openEl = document.getElementById('chartOpen');
    const closeEl = document.getElementById('chartClose');
    const change24El = document.getElementById('chart24h');
    
    const tradePriceEl = document.getElementById('tradePrice');
    const tradeChangeEl = document.getElementById('tradePriceChange');
    
    if (priceEl) priceEl.textContent = '$' + currentPrice.toFixed(2);
    if (tradePriceEl) tradePriceEl.textContent = '$' + currentPrice.toFixed(2);
    
    if (changeEl) {
        changeEl.textContent = (change >= 0 ? '+' : '') + change.toFixed(2) + '%';
        changeEl.className = 'price-change ' + (change >= 0 ? 'positive' : 'negative');
    }
    if (tradeChangeEl) {
        tradeChangeEl.textContent = (change >= 0 ? '+' : '') + change.toFixed(2) + '%';
        tradeChangeEl.className = 'price-change ' + (change >= 0 ? 'positive' : 'negative');
    }
    
    const recentData = chartDataPoints.slice(-50);
    if (highEl) highEl.textContent = '$' + Math.max(...recentData).toFixed(2);
    if (lowEl) lowEl.textContent = '$' + Math.min(...recentData).toFixed(2);
    if (volumeEl) volumeEl.textContent = (25 + Math.random() * 5).toFixed(1) + 'B';
    if (openEl) openEl.textContent = '$' + recentData[0].toFixed(2);
    if (closeEl) closeEl.textContent = '$' + currentPrice.toFixed(2);
    if (change24El) change24El.textContent = (change >= 0 ? '+' : '') + change.toFixed(2) + '%';
}

function startPriceUpdates() {
    if (priceUpdateInterval) clearInterval(priceUpdateInterval);
    updatePriceInfo();
    priceUpdateInterval = setInterval(updatePriceInfo, 2000);
}

function stopPriceUpdates() {
    if (priceUpdateInterval) {
        clearInterval(priceUpdateInterval);
        priceUpdateInterval = null;
    }
}

// ==================== WELCOME PAGE ====================
function initWelcomePage() {
    generateLiveTraders();
    generateTopWinners();
    setInterval(generateLiveTraders, 5000);
}

function generateLiveTraders() {
    const names = ['Felix K.', 'Sarah M.', 'John D.', 'Mary W.', 'David O.', 'Emma N.', 'James K.', 'Fatima A.', 'Michael O.', 'Amina B.'];
    const countries = ['üá∞üá™ Kenya', 'üá≥üá¨ Nigeria', 'üáøüá¶ South Africa', 'üá™üá¨ Egypt', 'üá¨üá≠ Ghana', 'üáπüáø Tanzania'];
    const emojis = ['üë®', 'üë©', 'üßë'];
    let html = '';
    for (let i = 0; i < 30; i++) {
        const name = names[Math.floor(Math.random() * names.length)];
        const country = countries[Math.floor(Math.random() * countries.length)];
        const emoji = emojis[Math.floor(Math.random() * emojis.length)];
        const profit = (Math.random() * 500 + 50).toFixed(2);
        html += `
            <div class="trader-card">
                <div class="trader-avatar">${emoji}</div>
                <div class="trader-info">
                    <div class="trader-name">${name} ‚Ä¢ ${country}</div>
                    <div class="trader-profit">+$${profit}</div>
                </div>
            </div>
        `;
    }
    const ticker = document.getElementById('liveTradersTicker');
    if (ticker) ticker.innerHTML = html + html;
}

function generateTopWinners() {
    const winners = [
        { rank: 1, name: 'Felix K.', location: 'Nairobi, Kenya', emoji: 'üë®', profit: '$12,450', trades: '1,234' },
        { rank: 2, name: 'Sarah M.', location: 'Lagos, Nigeria', emoji: 'üë©', profit: '$9,820', trades: '987' },
        { rank: 3, name: 'Michael O.', location: 'Johannesburg, SA', emoji: 'üë®', profit: '$8,650', trades: '856' },
        { rank: 4, name: 'Amina B.', location: 'Cairo, Egypt', emoji: 'üë©', profit: '$7,340', trades: '734' },
        { rank: 5, name: 'David N.', location: 'Accra, Ghana', emoji: 'üë®', profit: '$6,890', trades: '689' },
        { rank: 6, name: 'Emma W.', location: 'Kigali, Rwanda', emoji: 'üë©', profit: '$5,720', trades: '572' }
    ];
    let html = '';
    winners.forEach(winner => {
        html += `
            <div class="winner-card">
                <div class="winner-rank">${winner.rank}</div>
                <div class="winner-header">
                    <div class="winner-avatar-large">${winner.emoji}</div>
                    <div class="winner-details">
                        <h4>${winner.name}</h4>
                        <div class="winner-location">${winner.location}</div>
                    </div>
                </div>
                <div class="winner-stats">
                    <div class="winner-stat">
                        <div class="winner-stat-label">Total Profit</div>
                        <div class="winner-stat-value">${winner.profit}</div>
                    </div>
                    <div class="winner-stat">
                        <div class="winner-stat-label">Trades</div>
                        <div class="winner-stat-value">${winner.trades}</div>
                    </div>
                </div>
            </div>
        `;
    });
    const grid = document.getElementById('topWinnersGrid');
    if (grid) grid.innerHTML = html;
}

// ==================== AUTH FUNCTIONS ====================
function handleSignup(e) {
    e.preventDefault();
    const name = document.getElementById('signupName').value;
    const email = document.getElementById('signupEmail').value;
    const phone = document.getElementById('signupPhone').value;
    const password = document.getElementById('signupPassword').value;
    const confirm = document.getElementById('signupConfirm').value;
    const referralCode = document.getElementById('signupReferralCode').value;

    if (password !== confirm) {
        showAlert('signupAlert', '‚ùå Passwords do not match!', 'error');
        return false;
    }

    if (password.length < 6) {
        showAlert('signupAlert', '‚ùå Password must be at least 6 characters!', 'error');
        return false;
    }

    const userCode = 'CRP' + Math.random().toString(36).substr(2, 6).toUpperCase();
    currentUser = {
        name, 
        email, 
        phone, 
        referralCode: userCode,
        demoBalance: 25.00,
        demoProfit: 0.00,
        realBalance: 0.00,
        realProfit: 0.00,
        accountMode: 'demo'
    };
    
    accountMode = 'demo';
    demoBalance = 25.00;
    demoProfit = 0.00;
    realBalance = 0.00;
    realProfit = 0.00;
    currentBalance = 25.00;
    currentProfit = 0.00;
    
    localStorage.setItem('cryptoproUser', JSON.stringify(currentUser));
    showAlert('signupAlert', '‚úÖ Account created successfully! Redirecting...', 'success');
    setTimeout(() => {
        showLayer('dashboardLayer');
        showToast(`üéâ Welcome ${name}!\nüìä Your $25 DEMO bonus is ready!\nüí° Switch to REAL account when ready to trade with real money.`, 'success');
    }, 2000);
    return false;
}

function handleLogin(e) {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    
    if (!email || !password) {
        showAlert('loginAlert', '‚ùå Please enter email and password!', 'error');
        return false;
    }
    
    const stored = localStorage.getItem('cryptoproUser');
    if (stored) {
        currentUser = JSON.parse(stored);
        if (currentUser.email === email) {
            showAlert('loginAlert', '‚úÖ Login successful! Redirecting...', 'success');
            
            demoBalance = currentUser.demoBalance || 25.00;
            demoProfit = currentUser.demoProfit || 0.00;
            realBalance = currentUser.realBalance || 0.00;
            realProfit = currentUser.realProfit || 0.00;
            accountMode = currentUser.accountMode || 'demo';
            
            updateAccountReferences();
            loadUserData();
            
            setTimeout(() => {
                showLayer('dashboardLayer');
                showToast(`Welcome back, ${currentUser.name}!\nAccount: ${accountMode.toUpperCase()}`, 'success');
            }, 1500);
        } else {
            showAlert('loginAlert', '‚ùå Email does not match! Please check your credentials.', 'error');
        }
    } else {
        showAlert('loginAlert', '‚ùå No account found! Please sign up first.', 'error');
    }
    return false;
}

function handleLogout() {
    if (confirm('Are you sure you want to logout?')) {
        currentUser = null;
        showLayer('welcomeLayer');
        showToast('Logged out successfully', 'success');
    }
}

function showAlert(elementId, message, type) {
    const alert = document.getElementById(elementId);
    if (alert) {
        alert.textContent = message;
        alert.className = `alert alert-${type} show`;
        setTimeout(() => alert.classList.remove('show'), 5000);
    }
}

// ==================== TRADING FUNCTIONS ====================
function switchTradeTab(type) {
    currentTradeType = type;
    const buyTab = document.getElementById('buyTab');
    const sellTab = document.getElementById('sellTab');
    const button = document.getElementById('tradeButton');
    
    if (type === 'buy') {
        buyTab?.classList.add('active');
        sellTab?.classList.remove('active');
        if (button) {
            button.textContent = 'üöÄ EXECUTE BUY TRADE';
            button.style.background = 'linear-gradient(135deg, var(--accent-green), #0B8F5F)';
        }
    } else {
        sellTab?.classList.add('active');
        buyTab?.classList.remove('active');
        if (button) {
            button.textContent = 'üìâ EXECUTE SELL TRADE';
            button.style.background = 'linear-gradient(135deg, var(--accent-red), #cc0055)';
        }
    }
}

function setTradeAmount(amount) {
    const input = document.getElementById('tradeAmount');
    if (input) input.value = amount;
    calculatePotentialProfit();
}

function calculatePotentialProfit() {
    const amountEl = document.getElementById('tradeAmount');
    const leverageEl = document.getElementById('tradeLeverage');
    const profitEl = document.getElementById('potentialProfit');
    const roiEl = document.getElementById('potentialROI');
    
    if (!amountEl || !leverageEl) return;
    
    const amount = parseFloat(amountEl.value) || 0;
    const leverage = parseFloat(leverageEl.value) || 1;
    
    const baseProfit = amount * (0.05 + Math.random() * 0.10);
    const profit = baseProfit * leverage;
    const roi = (profit / amount * 100);
    
    if (profitEl) profitEl.textContent = '$' + profit.toFixed(2);
    if (roiEl) roiEl.textContent = roi.toFixed(1) + '%';
}

setTimeout(() => {
    const amountInput = document.getElementById('tradeAmount');
    const leverageSelect = document.getElementById('tradeLeverage');
    
    if (amountInput) amountInput.addEventListener('input', calculatePotentialProfit);
    if (leverageSelect) leverageSelect.addEventListener('change', calculatePotentialProfit);
}, 1000);

function executeTrade(e) {
    e.preventDefault();
    
    if (!currentUser) {
        showToast('‚ùå Please login first!', 'error');
        showLayer('loginLayer');
        return false;
    }
    
    const amount = parseFloat(document.getElementById('tradeAmount').value);
    const leverage = parseFloat(document.getElementById('tradeLeverage').value);
    const duration = parseInt(document.getElementById('tradeDuration').value);
    
    if (!amount || amount < 10) {
        showToast('‚ùå Minimum trade amount is $10', 'error');
        return false;
    }
    
    if (amount > currentBalance) {
        showToast('‚ùå Insufficient balance!', 'error');
        return false;
    }
    
    const trade = {
        id: 'TRD' + Date.now(),
        type: currentTradeType,
        amount: amount,
        leverage: leverage,
        duration: duration,
        entryPrice: chartDataPoints[chartDataPoints.length - 1],
        startTime: Date.now(),
        endTime: Date.now() + (duration * 1000),
        status: 'active'
    };
    
    activeTrades.push(trade);
    currentBalance -= amount;
    
    updateDashboardBalance();
    showToast(`‚úÖ ${currentTradeType.toUpperCase()} trade executed!\nüí∞ Amount: $${amount}\n‚ö° Leverage: ${leverage}x\n‚è±Ô∏è Duration: ${duration}s`, 'success');
    
    monitorTrade(trade);
    updateActiveTrades();
    
    document.getElementById('tradeForm').reset();
    calculatePotentialProfit();
    
    return false;
}

function monitorTrade(trade) {
    const checkInterval = setInterval(() => {
        if (Date.now() >= trade.endTime) {
            clearInterval(checkInterval);
            closeTrade(trade);
        } else {
            updateActiveTrades();
        }
    }, 1000);
}

function closeTrade(trade) {
    const exitPrice = chartDataPoints[chartDataPoints.length - 1];
    const priceChange = ((exitPrice - trade.entryPrice) / trade.entryPrice);
    
    let profitMultiplier = priceChange * trade.leverage;
    if (trade.type === 'sell') profitMultiplier = -profitMultiplier;
    
    profitMultiplier += (Math.random() - 0.5) * 0.04;
    
    const profitAmount = trade.amount * profitMultiplier;
    const finalAmount = trade.amount + profitAmount;
    
    trade.status = profitAmount > 0 ? 'won' : 'lost';
    trade.exitPrice = exitPrice;
    trade.profit = profitAmount;
    
    currentBalance += finalAmount;
    if (profitAmount > 0) {
        currentProfit += profitAmount;
    }
    
    tradeHistory.unshift(trade);
    activeTrades = activeTrades.filter(t => t.id !== trade.id);
    
    saveUserData();
    updateDashboardBalance();
    updateActiveTrades();
    
    if (profitAmount > 0) {
        showToast(`üéâ Trade WON!\nüí∞ Profit: +$${profitAmount.toFixed(2)}\nüìä Return: ${finalAmount.toFixed(2)}`, 'success');
    } else {
        showToast(`‚ùå Trade Lost\nüíî Loss: $${Math.abs(profitAmount).toFixed(2)}`, 'error');
    }
}

function updateActiveTrades() {
    const container = document.getElementById('activeTradesContainer');
    if (!container) return;
    
    if (activeTrades.length === 0) {
        container.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-secondary);">No active trades</div>';
        return;
    }
    
    let html = '<div style="display: grid; gap: 16px;">';
    activeTrades.forEach(trade => {
        const now = Date.now();
        const elapsed = now - trade.startTime;
        const remaining = Math.max(0, trade.endTime - now);
        const progress = (elapsed / (trade.duration * 1000)) * 100;
        
        const currentPrice = chartDataPoints[chartDataPoints.length - 1];
        const priceChange = ((currentPrice - trade.entryPrice) / trade.entryPrice) * 100;
        let currentProfit = (priceChange / 100) * trade.amount * trade.leverage;
        if (trade.type === 'sell') currentProfit = -currentProfit;
        
        const isProfitable = currentProfit > 0;
        
        html += `
            <div style="background: var(--bg-tertiary); border: 2px solid ${isProfitable ? 'var(--accent-green)' : 'var(--accent-red)'}; border-radius: 12px; padding: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <div>
                        <div style="font-size: 18px; font-weight: 700; color: var(--text-primary);">${trade.type === 'buy' ? 'üìà' : 'üìâ'} ${trade.type.toUpperCase()} - ${trade.leverage}x</div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">ID: ${trade.id}</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 24px; font-weight: 900; color: ${isProfitable ? 'var(--accent-green)' : 'var(--accent-red)'};">
                            ${isProfitable ? '+' : ''}$${currentProfit.toFixed(2)}
                        </div>
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            ${isProfitable ? '+' : ''}${((currentProfit / trade.amount) * 100).toFixed(2)}%
                        </div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-bottom: 16px;">
                    <div>
                        <div style="font-size: 11px; color: var(--text-secondary);">Amount</div>
                        <div style="font-size: 14px; font-weight: 600; color: var(--text-primary);">$${trade.amount.toFixed(2)}</div>
                    </div>
                    <div>
                        <div style="font-size: 11px; color: var(--text-secondary);">Entry</div>
                        <div style="font-size: 14px; font-weight: 600; color: var(--text-primary);">$${trade.entryPrice.toFixed(2)}</div>
                    </div>
                    <div>
                        <div style="font-size: 11px; color: var(--text-secondary);">Current</div>
                        <div style="font-size: 14px; font-weight: 600; color: var(--text-primary);">$${currentPrice.toFixed(2)}</div>
                    </div>
                </div>
                
                <div style="background: rgba(0,0,0,0.3); border-radius: 8px; height: 8px; overflow: hidden; margin-bottom: 8px;">
                    <div style="background: linear-gradient(90deg, var(--accent-green), var(--accent-blue)); height: 100%; width: ${progress}%; transition: width 0.3s;"></div>
                </div>
                
                <div style="text-align: center; font-size: 14px; font-weight: 600; color: var(--text-primary);">
                    ‚è±Ô∏è ${Math.floor(remaining / 1000)}s remaining
                </div>
            </div>
        `;
    });
    html += '</div>';
    
    container.innerHTML = html;
}

// ==================== AI BOTS SYSTEM ====================
function startTradingBot(botType) {
    if (!currentUser) {
        showToast('‚ùå Please login first!', 'error');
        showLayer('loginLayer');
        return;
    }

    const config = BOT_CONFIGS[botType];
    
    if (currentBalance < config.minAmount) {
        showToast(`‚ùå Minimum balance of $${config.minAmount} required for ${config.name}`, 'error');
        return;
    }

    const existingBot = tradingBots.find(b => b.type === botType);
    if (existingBot && existingBot.active) {
        showToast(`‚ùå ${config.name} is already running!`, 'error');
        return;
    }

    const bot = {
        id: 'BOT' + Date.now(),
        type: botType,
        config: config,
        active: true,
        startTime: Date.now(),
        totalTrades: 0,
        wonTrades: 0,
        totalProfit: 0,
        lastTradeTime: Date.now()
    };

    tradingBots.push(bot);
    
    showToast(`‚úÖ ${config.name} activated!\n${config.icon} ${config.description}\n‚è±Ô∏è Trading every ${config.tradeInterval / 60000} minutes`, 'success');
    
    startBotTrading();
    updateBotDashboard();
    saveUserData();
}

function stopTradingBot(botId) {
    const bot = tradingBots.find(b => b.id === botId);
    if (bot) {
        bot.active = false;
        showToast(`üõë ${bot.config.name} stopped\nüìä Total Trades: ${bot.totalTrades}\nüí∞ Total Profit: $${bot.totalProfit.toFixed(2)}`, 'success');
        updateBotDashboard();
        saveUserData();
    }
}

function startBotTrading() {
    if (botInterval) return;
    
    botInterval = setInterval(() => {
        const activeBots = tradingBots.filter(b => b.active);
        
        activeBots.forEach(bot => {
            const timeSinceLastTrade = Date.now() - bot.lastTradeTime;
            
            if (timeSinceLastTrade >= bot.config.tradeInterval) {
                executeBotTrade(bot);
            }
        });
        
        if (activeBots.length === 0 && botInterval) {
            clearInterval(botInterval);
            botInterval = null;
        }
    }, 5000);
}

function executeBotTrade(bot) {
    if (currentBalance < bot.config.minAmount) {
        bot.active = false;
        showToast(`‚è∏Ô∏è ${bot.config.name} paused - Insufficient balance`, 'error');
        updateBotDashboard();
        return;
    }

    const amount = bot.config.minAmount + Math.random() * (bot.config.maxAmount - bot.config.minAmount);
    const tradeAmount = Math.min(amount, currentBalance);

    const isWin = Math.random() < bot.config.winRate;

    let profitPercent;
    if (isWin) {
        profitPercent = bot.config.profitRange[0] + Math.random() * (bot.config.profitRange[1] - bot.config.profitRange[0]);
    } else {
        profitPercent = -(0.02 + Math.random() * 0.05);
    }

    const profitAmount = tradeAmount * profitPercent;
    const finalAmount = tradeAmount + profitAmount;

    const trade = {
        id: 'BTTRD' + Date.now(),
        type: Math.random() > 0.5 ? 'buy' : 'sell',
        amount: tradeAmount,
        leverage: 1,
        duration: bot.config.tradeInterval / 1000,
        entryPrice: chartDataPoints[chartDataPoints.length - 1],
        exitPrice: chartDataPoints[chartDataPoints.length - 1] * (1 + profitPercent),
        startTime: Date.now() - bot.config.tradeInterval,
        endTime: Date.now(),
        status: isWin ? 'won' : 'lost',
        profit: profitAmount,
        botName: bot.config.name,
        isBot: true
    };

    currentBalance -= tradeAmount;
    currentBalance += finalAmount;
    
    if (isWin) {
        currentProfit += profitAmount;
        bot.wonTrades++;
    }

    bot.totalTrades++;
    bot.totalProfit += profitAmount;
    bot.lastTradeTime = Date.now();

    tradeHistory.unshift(trade);
    if (tradeHistory.length > 100) {
        tradeHistory = tradeHistory.slice(0, 100);
    }

    updateDashboardBalance();
    updateBotDashboard();
    saveUserData();

    if (isWin && profitAmount > 5) {
        showToast(`${bot.config.icon} ${bot.config.name} WON!\nüí∞ +$${profitAmount.toFixed(2)}`, 'success');
    }
}

function updateBotDashboard() {
    const container = document.getElementById('botDashboardContainer');
    if (!container) return;

    if (tradingBots.length === 0) {
        container.innerHTML = `
            <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                <div style="font-size: 48px; margin-bottom: 16px;">ü§ñ</div>
                <div style="font-size: 18px; margin-bottom: 8px;">No Active Bots</div>
                <div style="font-size: 14px;">Activate a bot to start automated trading</div>
            </div>
        `;
        return;
    }

    let html = '<div style="display: grid; gap: 16px;">';
    
    tradingBots.forEach(bot => {
        const winRate = bot.totalTrades > 0 ? (bot.wonTrades / bot.totalTrades * 100) : 0;
        const isProfitable = bot.totalProfit > 0;
        const statusColor = bot.active ? 'var(--accent-green)' : 'var(--text-secondary)';
        
        html += `
            <div style="background: var(--bg-tertiary); border: 2px solid ${bot.active ? 'var(--accent-green)' : 'var(--border-color)'}; border-radius: 12px; padding: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="font-size: 32px;">${bot.config.icon}</div>
                        <div>
                            <div style="font-size: 18px; font-weight: 700; color: var(--text-primary);">${bot.config.name}</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">${bot.config.description}</div>
                        </div>
                    </div>
                    <div style="background: ${bot.active ? 'rgba(14, 203, 129, 0.2)' : 'rgba(132, 142, 156, 0.2)'}; padding: 6px 16px; border-radius: 8px; font-size: 12px; font-weight: 600; color: ${statusColor};">
                        ${bot.active ? 'üü¢ ACTIVE' : '‚è∏Ô∏è PAUSED'}
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 16px;">
                    <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Trades</div>
                        <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">${bot.totalTrades}</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Win Rate</div>
                        <div style="font-size: 16px; font-weight: 700; color: var(--accent-green);">${winRate.toFixed(1)}%</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Profit</div>
                        <div style="font-size: 16px; font-weight: 700; color: ${isProfitable ? 'var(--accent-green)' : 'var(--accent-red)'};">
                            ${isProfitable ? '+' : ''}$${bot.totalProfit.toFixed(2)}
                        </div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Interval</div>
                        <div style="font-size: 16px; font-weight: 700; color: var(--accent-blue);">${bot.config.tradeInterval / 60000}m</div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                    ${bot.active ? `
                        <button onclick="stopTradingBot('${bot.id}')" style="padding: 12px; background: linear-gradient(135deg, var(--accent-red), #cc0055); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                            ‚è∏Ô∏è Stop Bot
                        </button>
                    ` : `
                        <button onclick="reactivateBot('${bot.id}')" style="padding: 12px; background: linear-gradient(135deg, var(--accent-green), #0B8F5F); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                            ‚ñ∂Ô∏è Restart Bot
                        </button>
                    `}
                    <button onclick="deleteBot('${bot.id}')" style="padding: 12px; background: var(--bg-secondary); color: var(--accent-red); border: 2px solid var(--accent-red); border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                        üóëÔ∏è Delete
                    </button>
                </div>
            </div>
        `;
    });
    
    html += '</div>';
    container.innerHTML = html;
}

function reactivateBot(botId) {
    const bot = tradingBots.find(b => b.id === botId);
    if (bot) {
        if (currentBalance < bot.config.minAmount) {
            showToast(`‚ùå Minimum balance of $${bot.config.minAmount} required`, 'error');
            return;
        }
        bot.active = true;
        bot.lastTradeTime = Date.now();
        showToast(`‚úÖ ${bot.config.name} reactivated!`, 'success');
        startBotTrading();
        updateBotDashboard();
        saveUserData();
    }
}

function deleteBot(botId) {
    if (confirm('Are you sure you want to delete this bot? All stats will be lost.')) {
        tradingBots = tradingBots.filter(b => b.id !== botId);
        showToast('üóëÔ∏è Bot deleted successfully', 'success');
        updateBotDashboard();
        saveUserData();
    }
}

function showBotSelector() {
    const modal = document.createElement('div');
    modal.id = 'botSelectorModal';
    modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.8);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        animation: fadeIn 0.3s;
    `;

    let html = `
        <div style="background: var(--bg-secondary); border-radius: 24px; max-width: 900px; width: 100%; max-height: 90vh; overflow-y: auto; padding: 32px; position: relative;">
            <button onclick="closeBotSelector()" style="position: absolute; top: 16px; right: 16px; background: rgba(255,255,255,0.1); border: none; color: white; font-size: 24px; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; transition: all 0.3s;">√ó</button>
            
            <div style="text-align: center; margin-bottom: 32px;">
                <div style="font-size: 48px; margin-bottom: 12px;">ü§ñ</div>
                <div style="font-size: 28px; font-weight: 900; background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 8px;">Select AI Trading Bot</div>
                <div style="font-size: 14px; color: var(--text-secondary);">Choose a bot that matches your risk tolerance</div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
    `;

    Object.entries(BOT_CONFIGS).forEach(([type, config]) => {
        html += `
            <div style="background: var(--bg-tertiary); border: 2px solid var(--border-color); border-radius: 16px; padding: 24px; text-align: center; cursor: pointer; transition: all 0.3s;" onclick="selectBot('${type}')" onmouseover="this.style.borderColor='var(--accent-green)'; this.style.transform='translateY(-5px)'" onmouseout="this.style.borderColor='var(--border-color)'; this.style.transform='translateY(0)'">
                <div style="font-size: 48px; margin-bottom: 12px;">${config.icon}</div>
                <div style="font-size: 18px; font-weight: 700; color: var(--text-primary); margin-bottom: 8px;">${config.name}</div>
                <div style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px; min-height: 40px;">${config.description}</div>
                
                <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 12px; margin-bottom: 12px;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Win Rate</div>
                    <div style="font-size: 20px; font-weight: 700; color: var(--accent-green);">${(config.winRate * 100).toFixed(0)}%</div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 16px;">
                    <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 8px;">
                        <div style="font-size: 10px; color: var(--text-secondary);">Min Amount</div>
                        <div style="font-size: 14px; font-weight: 600; color: var(--text-primary);">$${config.minAmount}</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 8px;">
                        <div style="font-size: 10px; color: var(--text-secondary);">Interval</div>
                        <div style="font-size: 14px; font-weight: 600; color: var(--accent-blue);">${config.tradeInterval / 60000}m</div>
                    </div>
                </div>

                <div style="font-size: 12px; color: var(--accent-yellow); margin-bottom: 12px;">
                    Expected: ${(config.profitRange[0] * 100).toFixed(0)}-${(config.profitRange[1] * 100).toFixed(0)}% per trade
                </div>

                <button onclick="event.stopPropagation(); selectBot('${type}')" style="width: 100%; padding: 12px; background: linear-gradient(135deg, var(--accent-green), #0B8F5F); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                    Activate Bot
                </button>
            </div>
        `;
    });

    html += `
            </div>
        </div>
    `;

    modal.innerHTML = html;
    document.body.appendChild(modal);
}

function closeBotSelector() {
    const modal = document.getElementById('botSelectorModal');
    if (modal) {
        modal.style.animation = 'fadeOut 0.3s';
        setTimeout(() => modal.remove(), 300);
    }
}

function selectBot(botType) {
    closeBotSelector();
    startTradingBot(botType);
}

function updateBotStats() {
    const activeBots = tradingBots.filter(b => b.active).length;
    const totalTrades = tradingBots.reduce((sum, b) => sum + b.totalTrades, 0);
    const totalProfit = tradingBots.reduce((sum, b) => sum + b.totalProfit, 0);
    const totalWon = tradingBots.reduce((sum, b) => sum + b.wonTrades, 0);
    const winRate = totalTrades > 0 ? (totalWon / totalTrades * 100) : 0;

    const activeEl = document.getElementById('totalActiveBots');
    const tradesEl = document.getElementById('totalBotTrades');
    const profitEl = document.getElementById('totalBotProfit');
    const winRateEl = document.getElementById('botWinRate');

    if (activeEl) activeEl.textContent = activeBots;
    if (tradesEl) tradesEl.textContent = totalTrades;
    if (profitEl) profitEl.textContent = '$' + totalProfit.toFixed(2);
    if (winRateEl) winRateEl.textContent = winRate.toFixed(1) + '%';
}

// ==================== TRADE HISTORY ====================
function updateTradeHistory() {
    const container = document.getElementById('tradeHistoryTable');
    if (!container) return;
    
    const totalTradesEl = document.getElementById('historyTotalTrades');
    const winRateEl = document.getElementById('historyWinRate');
    const totalProfitEl = document.getElementById('historyTotalProfit');
    const bestTradeEl = document.getElementById('historyBestTrade');
    
    if (tradeHistory.length === 0) {
        container.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-secondary);">No trades yet</div>';
        if (totalTradesEl) totalTradesEl.textContent = '0';
        if (winRateEl) winRateEl.textContent = '0%';
        if (totalProfitEl) totalProfitEl.textContent = '$0.00';
        if (bestTradeEl) bestTradeEl.textContent = '$0.00';
        return;
    }
    
    const wonTrades = tradeHistory.filter(t => t.status === 'won').length;
    const winRate = (wonTrades / tradeHistory.length * 100).toFixed(1);
    const totalProfit = tradeHistory.reduce((sum, t) => sum + (t.profit || 0), 0);
    const bestTrade = Math.max(...tradeHistory.map(t => t.profit || 0));
    
    if (totalTradesEl) totalTradesEl.textContent = tradeHistory.length;
    if (winRateEl) winRateEl.textContent = winRate + '%';
    if (totalProfitEl) totalProfitEl.textContent = '$' + totalProfit.toFixed(2);
    if (bestTradeEl) bestTradeEl.textContent = '$' + bestTrade.toFixed(2);
    
    let html = '<div style="overflow-x: auto;"><table style="width: 100%; border-collapse: collapse;">';
    html += `
        <thead>
            <tr style="background: var(--bg-tertiary); text-align: left;">
                <th style="padding: 12px; border-bottom: 2px solid var(--border-color);">Date</th>
                <th style="padding: 12px; border-bottom: 2px solid var(--border-color);">Type</th>
                <th style="padding: 12px; border-bottom: 2px solid var(--border-color);">Amount</th>
                <th style="padding: 12px; border-bottom: 2px solid var(--border-color);">Leverage</th>
                <th style="padding: 12px; border-bottom: 2px solid var(--border-color);">Entry</th>
                <th style="padding: 12px; border-bottom: 2px solid var(--border-color);">Exit</th>
                <th style="padding: 12px; border-bottom: 2px solid var(--border-color);">Profit/Loss</th>
                <th style="padding: 12px; border-bottom: 2px solid var(--border-color);">Status</th>
            </tr>
        </thead>
        <tbody>
    `;
    
    tradeHistory.forEach(trade => {
        const date = new Date(trade.endTime).toLocaleString();
        const profitColor = (trade.profit || 0) >= 0 ? 'var(--accent-green)' : 'var(--accent-red)';
        
        html += `
            <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 12px; font-size: 12px; color: var(--text-secondary);">${date}</td>
                <td style="padding: 12px;">
                    <span style="background: ${trade.type === 'buy' ? 'rgba(14, 203, 129, 0.2)' : 'rgba(246, 70, 93, 0.2)'}; padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; color: ${trade.type === 'buy' ? 'var(--accent-green)' : 'var(--accent-red)'};">
                        ${trade.type === 'buy' ? 'üìà' : 'üìâ'} ${trade.type.toUpperCase()}
                    </span>
                </td>
                <td style="padding: 12px; font-weight: 600;">$${trade.amount.toFixed(2)}</td>
                <td style="padding: 12px; color: var(--accent-yellow);">${trade.leverage}x</td>
                <td style="padding: 12px; font-size: 14px;">$${trade.entryPrice.toFixed(2)}</td>
                <td style="padding: 12px; font-size: 14px;">$${(trade.exitPrice || 0).toFixed(2)}</td>
                <td style="padding: 12px; font-weight: 700; font-size: 16px; color: ${profitColor};">
                    ${(trade.profit || 0) >= 0 ? '+' : ''}$${(trade.profit || 0).toFixed(2)}
                </td>
                <td style="padding: 12px;">
                    <span style="background: ${trade.status === 'won' ? 'rgba(14, 203, 129, 0.2)' : 'rgba(246, 70, 93, 0.2)'}; padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; color: ${trade.status === 'won' ? 'var(--accent-green)' : 'var(--accent-red)'};">
                        ${trade.status === 'won' ? '‚úÖ WON' : '‚ùå LOST'}
                    </span>
                </td>
            </tr>
        `;
    });
    
    html += '</tbody></table></div>';
    container.innerHTML = html;
}

// ==================== PAYMENT FUNCTIONS ====================
function selectPaymentMethod(method) {
    selectedPaymentMethod = method;
    
    document.querySelectorAll('.payment-method-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    if (event && event.target) {
        const btn = event.target.closest('.payment-method-btn');
        if (btn) btn.classList.add('active');
    }
    
    document.querySelectorAll('.payment-details').forEach(detail => {
        detail.classList.remove('active');
    });
    
    const targetEl = document.getElementById(method);
    if (targetEl) targetEl.classList.add('active');
}

function copyToClipboard(text) {
    if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(() => {
            showToast(`‚úÖ Copied: ${text}`, 'success');
        }).catch(() => fallbackCopy(text));
    } else {
        fallbackCopy(text);
    }
}

function fallbackCopy(text) {
    const textarea = document.createElement('textarea');
    textarea.value = text;
    textarea.style.position = 'fixed';
    textarea.style.left = '-999999px';
    document.body.appendChild(textarea);
    textarea.select();
    try {
        document.execCommand('copy');
        showToast(`‚úÖ Copied: ${text}`, 'success');
    } catch (err) {
        alert(`Copy this: ${text}`);
    }
    document.body.removeChild(textarea);
}

function processDeposit(e) {
    e.preventDefault();
    
    if (accountMode === 'demo') {
        if (confirm('Deposits go to your REAL account.\n\nSwitch to REAL account now?')) {
            switchAccount('real');
            setTimeout(() => {
                showLayer('depositLayer');
            }, 500);
        }
        return false;
    }
    
    const amount = parseFloat(document.getElementById('depositAmount').value);
    const proof = document.getElementById('depositProof').value;
    
    if (!amount || amount < 10) {
        showToast('‚ùå Minimum deposit is $10', 'error');
        return false;
    }
    
    if (!selectedPaymentMethod) {
        showToast('‚ùå Please select a payment method!', 'error');
        return false;
    }
    
    if (!proof || proof.trim() === '') {
        showToast('‚ùå Please provide payment proof screenshot', 'error');
        return false;
    }
    
    let methodName = '';
    let paymentDetails = '';
    
    if (selectedPaymentMethod === 'mpesa-phone') {
        methodName = 'M-Pesa Phone';
        paymentDetails = `Phone: ${MPESA_NUMBER}`;
    } else if (selectedPaymentMethod === 'mpesa-till') {
        methodName = 'M-Pesa Till';
        paymentDetails = `Till: ${MPESA_TILL}`;
    } else if (selectedPaymentMethod === 'bank') {
        methodName = 'Bank Transfer';
        paymentDetails = `Account: 0310184912409 (Equity Bank)`;
    } else if (selectedPaymentMethod === 'crypto') {
        methodName = 'Crypto USDT';
        paymentDetails = `TRC-20: TK4rUz6TUEd7zCWeuiX5R47pSNdPswJnAc`;
    }
    
    const message = `üÜï NEW DEPOSIT REQUEST\n\nüí∞ Amount: $${amount.toFixed(2)}\nüì± Method: ${methodName}\nüî¢ Details: ${paymentDetails}\n\nüì∏ Proof: ${proof}\n\nüë§ User: ${currentUser ? currentUser.name : 'Guest'}\nüìß Email: ${currentUser ? currentUser.email : 'N/A'}\n\n‚úÖ Please verify and credit account automatically.`;
    
    const whatsappUrl = `https://wa.me/${MPESA_NUMBER.replace('+', '')}?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
    
    showToast(`‚úÖ Deposit request submitted!\n\nAmount: $${amount.toFixed(2)}\nMethod: ${methodName}\n\nYour deposit will be automatically credited within 5 minutes after verification.`, 'success');
    
    setTimeout(() => showLayer('dashboardLayer'), 2000);
    return false;
}

// ==================== WITHDRAWAL ====================
function selectWithdrawMethod(method) {
    selectedWithdrawMethod = method;
    
    document.querySelectorAll('.payment-method-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    if (event && event.target) {
        const btn = event.target.closest('.payment-method-btn');
        if (btn) btn.classList.add('active');
    }
    
    document.querySelectorAll('.payment-details').forEach(detail => {
        detail.classList.remove('active');
    });
    
    const targetEl = document.getElementById('withdraw-' + method);
    if (targetEl) targetEl.classList.add('active');
}

function processWithdrawal(e) {
    e.preventDefault();
    
    if (!currentUser) {
        showToast('‚ùå Please login first!', 'error');
        return false;
    }
    
    if (accountMode === 'demo') {
        showToast('‚ùå Cannot withdraw from DEMO account!\nüí° Switch to REAL account to withdraw funds.', 'error');
        return false;
    }
    
    const amount = parseFloat(document.getElementById('withdrawAmount').value);
    
    if (!amount || amount < 50) {
        showToast('‚ùå Minimum withdrawal is $50', 'error');
        return false;
    }
    
    if (amount > currentBalance) {
        showToast('‚ùå Insufficient balance!', 'error');
        return false;
    }
    
    if (!selectedWithdrawMethod) {
        showToast('‚ùå Please select a withdrawal method!', 'error');
        return false;
    }
    
    let methodDetails = '';
    
    if (selectedWithdrawMethod === 'mpesa') {
        const phone = document.getElementById('withdrawMpesaPhone').value;
        const name = document.getElementById('withdrawMpesaName').value;
        if (!phone || !name) {
            showToast('‚ùå Please fill all M-Pesa details', 'error');
            return false;
        }
        methodDetails = `M-Pesa: ${phone} (${name})`;
    } else if (selectedWithdrawMethod === 'bank') {
        const bankName = document.getElementById('withdrawBankName').value;
        const account = document.getElementById('withdrawBankAccount').value;
        const accountName = document.getElementById('withdrawBankAccountName').value;
        if (!bankName || !account || !accountName) {
            showToast('‚ùå Please fill all bank details', 'error');
            return false;
        }
        methodDetails = `${bankName} - ${account} (${accountName})`;
    } else if (selectedWithdrawMethod === 'crypto') {
        const address = document.getElementById('withdrawCryptoAddress').value;
        if (!address) {
            showToast('‚ùå Please enter your USDT wallet address', 'error');
            return false;
        }
        methodDetails = `USDT TRC-20: ${address}`;
    }
    
    const fee = amount * 0.02;
    const netAmount = amount - fee;
    
    const withdrawal = {
        id: 'WDR' + Date.now(),
        amount: amount,
        fee: fee,
        netAmount: netAmount,
        method: selectedWithdrawMethod,
        details: methodDetails,
        date: Date.now(),
        status: 'pending'
    };
    
    withdrawalHistory.unshift(withdrawal);
    
    const message = `üÜï NEW WITHDRAWAL REQUEST\n\nüí∞ Amount: $${amount.toFixed(2)}\nüí≥ Fee (2%): $${fee.toFixed(2)}\n‚úÖ Net Amount: $${netAmount.toFixed(2)}\n\nüì± Method: ${selectedWithdrawMethod.toUpperCase()}\nüî¢ Details: ${methodDetails}\n\nüë§ User: ${currentUser.name}\nüìß Email: ${currentUser.email}\n\n‚è∞ Requested: ${new Date().toLocaleString()}\n\n‚úÖ Please process within 24 hours.`;
    
    const whatsappUrl = `https://wa.me/${MPESA_NUMBER.replace('+', '')}?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
    
    showToast(`‚úÖ Withdrawal request submitted!\n\nüí∞ Amount: $${amount.toFixed(2)}\nüí≥ Fee: $${fee.toFixed(2)}\n‚úÖ You'll receive: $${netAmount.toFixed(2)}\n\n‚è±Ô∏è Processing time: 24-48 hours`, 'success');
    
    updateWithdrawalHistory();
    
    setTimeout(() => showLayer('dashboardLayer'), 2000);
    
    return false;
}

function updateWithdrawalHistory() {
    const container = document.getElementById('withdrawalHistoryContainer');
    if (!container) return;
    
    if (withdrawalHistory.length === 0) {
        container.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-secondary);">No withdrawals yet</div>';
        return;
    }
    
    let html = '<div style="display: grid; gap: 16px;">';
    withdrawalHistory.forEach(w => {
        const statusColor = w.status === 'completed' ? 'var(--accent-green)' : w.status === 'pending' ? 'var(--accent-yellow)' : 'var(--accent-red)';
        const statusText = w.status === 'completed' ? '‚úÖ Completed' : w.status === 'pending' ? '‚è≥ Pending' : '‚ùå Rejected';
        
        html += `
            <div style="background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                    <div>
                        <div style="font-size: 18px; font-weight: 700; color: var(--text-primary);">$${w.amount.toFixed(2)}</div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">${new Date(w.date).toLocaleString()}</div>
                    </div>
                    <div style="background: rgba(${statusColor === 'var(--accent-green)' ? '14, 203, 129' : statusColor === 'var(--accent-yellow)' ? '252, 213, 53' : '246, 70, 93'}, 0.2); padding: 6px 16px; border-radius: 8px; font-size: 12px; font-weight: 600; color: ${statusColor};">
                        ${statusText}
                    </div>
                </div>
                <div style="font-size: 13px; color: var(--text-secondary);">
                    Method: ${w.method.toUpperCase()}<br>
                    Details: ${w.details}<br>
                    Fee: $${w.fee.toFixed(2)} | Net: $${w.netAmount.toFixed(2)}
                </div>
            </div>
        `;
    });
    html += '</div>';
    
    container.innerHTML = html;
}

// ==================== REFERRALS WITH ALL SOCIAL MEDIA ====================
function copyReferralCode() {
    const code = currentUser?.referralCode || 'CRP123456';
    copyToClipboard(code);
}

function copyReferralLink() {
    const code = currentUser?.referralCode || 'CRP123456';
    const link = window.location.origin + window.location.pathname + '?ref=' + code;
    copyToClipboard(link);
}

function shareWhatsApp() {
    const code = currentUser?.referralCode || 'CRP123456';
    const link = window.location.origin + window.location.pathname + '?ref=' + code;
    const message = `üöÄ Join me on CryptoPro - the best crypto trading platform!\n\nüí∞ Get $25 FREE signup bonus\nüìà AI-powered trading bots\n‚úÖ Daily profits guaranteed\n\nUse my referral code: ${code}\nOr click: ${link}\n\nStart earning today! üéØ`;
    
    const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
}

function shareTelegram() {
    const code = currentUser?.referralCode || 'CRP123456';
    const link = window.location.origin + window.location.pathname + '?ref=' + code;
    const message = `üöÄ Join me on CryptoPro!\n\nüí∞ $25 FREE bonus\nüìà AI trading\n\nCode: ${code}\n${link}`;
    
    const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(link)}&text=${encodeURIComponent(message)}`;
    window.open(telegramUrl, '_blank');
}

function shareFacebook() {
    const code = currentUser?.referralCode || 'CRP123456';
    const link = window.location.origin + window.location.pathname + '?ref=' + code;
    
    const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(link)}&quote=${encodeURIComponent('Join me on CryptoPro and get $25 FREE! Use code: ' + code)}`;
    window.open(facebookUrl, '_blank');
}

function shareEmail() {
    const code = currentUser?.referralCode || 'CRP123456';
    const link = window.location.origin + window.location.pathname + '?ref=' + code;
    const subject = 'üöÄ Get $25 FREE on CryptoPro!';
    const body = `Hi,\n\nI've been making great profits with CryptoPro, an AI-powered crypto trading platform!\n\nYou can get started with a FREE $25 bonus using my referral code: ${code}\n\nOr click this link: ${link}\n\nFeatures:\n‚úÖ AI Trading Bots\n‚úÖ Daily Profits\n‚úÖ Fast Withdrawals\n‚úÖ 24/7 Support\n\nJoin me today!\n\nBest regards`;
    
    const emailUrl = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    window.location.href = emailUrl;
}

function updateReferralStats() {
    const totalEl = document.getElementById('totalReferrals');
    const earningsEl = document.getElementById('referralEarnings');
    const activeEl = document.getElementById('activeReferrals');
    const codeEl = document.getElementById('referralCode');
    const linkEl = document.getElementById('referralLink');
    
    if (totalEl) totalEl.textContent = referrals.length;
    if (activeEl) activeEl.textContent = referrals.filter(r => r.active).length;
    
    const totalEarnings = referrals.reduce((sum, r) => sum + (r.earnings || 0), 0);
    if (earningsEl) earningsEl.textContent = '$' + totalEarnings.toFixed(2);
    
    const code = currentUser?.referralCode || 'CRP123456';
    if (codeEl) codeEl.textContent = code;
    if (linkEl) linkEl.textContent = window.location.origin + window.location.pathname + '?ref=' + code;
    
    updateReferralList();
}

function updateReferralList() {
    const container = document.getElementById('referralListContainer');
    if (!container) return;
    
    if (referrals.length === 0) {
        container.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--text-secondary);">No referrals yet. Start sharing your link!</div>';
        return;
    }
    
    let html = '<div style="display: grid; gap: 16px;">';
    referrals.forEach(ref => {
        html += `
            <div style="background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 12px; padding: 20px; display: flex; justify-content: space-between; align-items: center;">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px;">üë§</div>
                    <div>
                        <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">${ref.name}</div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">Joined: ${new Date(ref.joinDate).toLocaleDateString()}</div>
                    </div>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 20px; font-weight: 700; color: var(--accent-green);">$${(ref.earnings || 0).toFixed(2)}</div>
                    <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;">${ref.active ? '‚úÖ Active' : '‚è∏Ô∏è Inactive'}</div>
                </div>
            </div>
        `;
    });
    html += '</div>';
    
    container.innerHTML = html;
}

// ==================== REVIEWS ====================
function generateReviews() {
    const reviews = [
        { name: 'Felix Kiprotich', location: 'Nairobi, Kenya', rating: 5, text: 'CryptoPro changed my life! I\'ve been making consistent profits daily. Withdrew $5,000 last month with zero issues. The AI bots are incredible!', avatar: 'üë®', profit: '$12,450' },
        { name: 'Sarah Wanjiku', location: 'Mombasa, Kenya', rating: 5, text: 'Best trading platform in Africa! Customer support is amazing, withdrawals are fast, and the profits are real. I started with $50 and now have over $3,000!', avatar: 'üë©', profit: '$8,920' },
        { name: 'Michael Ochieng', location: 'Johannesburg, SA', rating: 5, text: 'I was skeptical at first, but after my first withdrawal of $500, I became a believer. The platform is professional and the profits are consistent.', avatar: 'üë®', profit: '$6,340' },
        { name: 'Amina Hassan', location: 'Cairo, Egypt', rating: 5, text: 'Finally, a crypto platform that actually pays! I\'ve referred 15 friends and earning 20% commission from their trades. Passive income at its best!', avatar: 'üë©', profit: '$9,180' },
        { name: 'David Mensah', location: 'Accra, Ghana', rating: 5, text: 'The AI trading bots are game-changers. Set it and forget it - wake up to profits every day. Already made back my initial investment 10x over!', avatar: 'üë®', profit: '$7,560' },
        { name: 'Emma Akinyi', location: 'Kigali, Rwanda', rating: 5, text: 'Professional platform with real results. I\'ve been trading for 3 months and my account has grown from $100 to $2,400. Highly recommended!', avatar: 'üë©', profit: '$5,890' },
        { name: 'James Kamau', location: 'Nairobi, Kenya', rating: 5, text: 'Withdrawals processed within 24 hours, every single time. The customer support team is responsive and helpful. This is the real deal!', avatar: 'üë®', profit: '$11,200' },
        { name: 'Fatima Ibrahim', location: 'Lagos, Nigeria', rating: 5, text: 'I quit my 9-5 job thanks to CryptoPro. Making more in a week than I used to make in a month. The freedom is priceless!', avatar: 'üë©', profit: '$15,670' },
        { name: 'Peter Nkosi', location: 'Durban, SA', rating: 5, text: 'The referral program alone pays my bills! Every friend I refer becomes a long-term income stream. Plus my own trading profits - it\'s amazing!', avatar: 'üë®', profit: '$8,450' },
        { name: 'Grace Mutua', location: 'Nairobi, Kenya', rating: 5, text: 'Started with the $25 bonus, turned it into $500 in my first week! This platform is legit and the support team is always available to help.', avatar: 'üë©', profit: '$4,230' },
        { name: 'Ahmed Ali', location: 'Alexandria, Egypt', rating: 5, text: 'Been trading for 6 months - zero complaints. Consistent profits, fast withdrawals, and excellent customer service. My entire family is now using it!', avatar: 'üë®', profit: '$13,890' },
        { name: 'Mary Njeri', location: 'Kisumu, Kenya', rating: 5, text: 'The best decision I ever made! The AI does all the work while I enjoy the profits. Already planning my vacation with the money I\'ve made.', avatar: 'üë©', profit: '$7,120' }
    ];
    
    const container = document.getElementById('reviewsGrid');
    if (!container) return;
    
    let html = '';
    reviews.forEach(review => {
        const stars = '‚≠ê'.repeat(review.rating);
        html += `
            <div style="background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 16px; padding: 24px; transition: all 0.3s;">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">
                    <div style="width: 56px; height: 56px; background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px;">${review.avatar}</div>
                    <div style="flex: 1;">
                        <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">${review.name}</div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;">${review.location}</div>
                        <div style="font-size: 18px; margin-top: 4px;">${stars}</div>
                    </div>
                </div>
                <div style="font-size: 14px; color: var(--text-primary); line-height: 1.7; margin-bottom: 16px;">"${review.text}"</div>
                <div style="background: rgba(14, 203, 129, 0.1); border: 1px solid rgba(14, 203, 129, 0.3); border-radius: 8px; padding: 12px; text-align: center;">
                    <div style="font-size: 11px; color: var(--text-secondary); margin-bottom: 4px;">Total Profit Earned</div>
                    <div style="font-size: 24px; font-weight: 900; color: var(--accent-green);">${review.profit}</div>
                </div>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

// ==================== PROFILE ====================
function updateProfilePage() {
    if (!currentUser) return;
    
    const nameEl = document.getElementById('profileName');
    const emailEl = document.getElementById('profileEmail');
    const phoneEl = document.getElementById('profilePhone');
    const codeEl = document.getElementById('profileReferralCode');
    const joinDateEl = document.getElementById('profileJoinDate');
    const balanceEl = document.getElementById('profileBalance');
    const tradesEl = document.getElementById('profileTotalTrades');
    const profitEl = document.getElementById('profileTotalProfit');
    const referralsEl = document.getElementById('profileReferrals');
    
    if (nameEl) nameEl.textContent = currentUser.name;
    if (emailEl) emailEl.textContent = currentUser.email;
    if (phoneEl) phoneEl.textContent = currentUser.phone || 'Not provided';
    if (codeEl) codeEl.textContent = currentUser.referralCode || 'N/A';
    if (joinDateEl) joinDateEl.textContent = new Date().toLocaleDateString();
    if (balanceEl) balanceEl.textContent = '$' + currentBalance.toFixed(2);
    if (tradesEl) tradesEl.textContent = tradeHistory.length;
    if (profitEl) profitEl.textContent = '$' + currentProfit.toFixed(2);
    if (referralsEl) referralsEl.textContent = referrals.length;
}

// ==================== UPDATE BALANCE ====================
function updateDashboardBalance() {
    const balanceEl = document.getElementById('dashBalance');
    const profitEl = document.getElementById('dashProfit');
    const availableEl = document.getElementById('availableBalance');
    const withdrawAvailableEl = document.getElementById('withdrawAvailable');
    const maxWithdrawEl = document.getElementById('maxWithdraw');
    const dashAvailableEl = document.getElementById('dashAvailable');
    
    if (balanceEl) balanceEl.textContent = '$' + currentBalance.toFixed(2);
    if (profitEl) profitEl.textContent = '$' + currentProfit.toFixed(2);
    if (availableEl) availableEl.textContent = currentBalance.toFixed(2);
    if (dashAvailableEl) dashAvailableEl.textContent = '$' + currentBalance.toFixed(2);
    if (withdrawAvailableEl) withdrawAvailableEl.textContent = '$' + currentBalance.toFixed(2);
    if (maxWithdrawEl) maxWithdrawEl.textContent = currentBalance.toFixed(2);
    
    updateAccountModeUI();
}

// ==================== SAVE/LOAD DATA ====================
function saveUserData() {
    if (currentUser) {
        // Save current mode data first
        if (accountMode === 'demo') {
            demoBalance = currentBalance;
            demoProfit = currentProfit;
            demoTradeHistory = [...tradeHistory];
            demoTradingBots = [...tradingBots];
        } else {
            realBalance = currentBalance;
            realProfit = currentProfit;
            realTradeHistory = [...tradeHistory];
            realTradingBots = [...tradingBots];
        }
        
        currentUser.demoBalance = demoBalance;
        currentUser.demoProfit = demoProfit;
        currentUser.realBalance = realBalance;
        currentUser.realProfit = realProfit;
        currentUser.accountMode = accountMode;
        
        localStorage.setItem('cryptoproUser', JSON.stringify(currentUser));
        localStorage.setItem('cryptoproDemoTrades', JSON.stringify(demoTradeHistory));
        localStorage.setItem('cryptoproRealTrades', JSON.stringify(realTradeHistory));
        localStorage.setItem('cryptoproDemoBots', JSON.stringify(demoTradingBots));
        localStorage.setItem('cryptoproRealBots', JSON.stringify(realTradingBots));
        localStorage.setItem('cryptoproReferrals', JSON.stringify(referrals));
        localStorage.setItem('cryptoproWithdrawals', JSON.stringify(withdrawalHistory));
    }
}

function loadUserData() {
    const demoTradesData = localStorage.getItem('cryptoproDemoTrades');
    const realTradesData = localStorage.getItem('cryptoproRealTrades');
    const demoBotsData = localStorage.getItem('cryptoproDemoBots');
    const realBotsData = localStorage.getItem('cryptoproRealBots');
    const referralsData = localStorage.getItem('cryptoproReferrals');
    const withdrawalsData = localStorage.getItem('cryptoproWithdrawals');
    
    if (demoTradesData) demoTradeHistory = JSON.parse(demoTradesData);
    if (realTradesData) realTradeHistory = JSON.parse(realTradesData);
    if (demoBotsData) demoTradingBots = JSON.parse(demoBotsData);
    if (realBotsData) realTradingBots = JSON.parse(realBotsData);
    if (referralsData) referrals = JSON.parse(referralsData);
    if (withdrawalsData) withdrawalHistory = JSON.parse(withdrawalsData);
    
    if (currentUser) {
        demoBalance = currentUser.demoBalance || 25.00;
        demoProfit = currentUser.demoProfit || 0.00;
        realBalance = currentUser.realBalance || 0.00;
        realProfit = currentUser.realProfit || 0.00;
        accountMode = currentUser.accountMode || 'demo';
    }
    
    updateAccountReferences();
    
    // Restart active bots
    if (tradingBots.some(b => b.active)) {
        startBotTrading();
    }
}

// Auto-save every 30 seconds
setInterval(saveUserData, 30000);

console.log('‚úÖ ALL 12 LAYERS COMPLETE WITH ALL FEATURES!');
console.log('üìä Demo/Real Account System: ‚úì');
console.log('üí∞ Deposit System (4 methods): ‚úì');
console.log('üí∏ Withdrawal System (3 methods): ‚úì');
console.log('‚ö° Manual Trading: ‚úì');
console.log('ü§ñ AI Trading Bots (4 types): ‚úì');
console.log('üìú Trade History: ‚úì');
console.log('üéÅ Referral System: ‚úì');
console.log('üì± Social Sharing (WhatsApp, Telegram, Facebook, Email): ‚úì');
console.log('‚≠ê Reviews/Testimonials: ‚úì');
console.log('‚öôÔ∏è Profile/Settings: ‚úì');
console.log('üìà Realistic Chart Animation: ‚úì');
console.log('üíæ LocalStorage Persistence: ‚úì');
console.log('üöÄ PLATFORM 100% OPERATIONAL!');
</script>

</body>
</html>
